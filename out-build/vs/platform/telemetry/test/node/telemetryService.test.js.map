{"version":3,"file":"vs/platform/telemetry/test/node/telemetryService.test.js","sourceRoot":"file:///Users/darrin/src/vscode/src","sources":["vs/platform/telemetry/test/node/telemetryService.test.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport * as assert from 'assert';\nimport IdleMonitor = require('vs/base/browser/idleMonitor');\nimport {TelemetryService} from 'vs/platform/telemetry/browser/telemetryService';\nimport Telemetry = require('vs/platform/telemetry/common/telemetry');\nimport InstantiationService = require('vs/platform/instantiation/common/instantiationService');\nimport Errors = require('vs/base/common/errors');\nimport Timer = require('vs/base/common/timer');\nimport * as sinon from 'sinon';\n\nconst optInStatusEventName: string = 'optInStatus';\n\nclass TestTelemetryAppender implements Telemetry.ITelemetryAppender {\n\n\tpublic events: any[];\n\tpublic isDisposed: boolean;\n\n\tconstructor() {\n\t\tthis.events = [];\n\t\tthis.isDisposed = false;\n\t}\n\n\tpublic log(eventName: string, data?: any): void {\n\t\tthis.events.push({\n\t\t\teventName: eventName,\n\t\t\tdata: data\n\t\t});\n\t}\n\n\tpublic getEventsCount() {\n\t\treturn this.events.length;\n\t}\n\n\tpublic dispose() {\n\t\tthis.isDisposed = true;\n\t}\n}\n\nclass ErrorTestingSettings {\n\tpublic personalInfo;\n\tpublic importantInfo;\n\tpublic filePrefix;\n\tpublic dangerousPathWithoutImportantInfo;\n\tpublic dangerousPathWithImportantInfo;\n\tpublic missingModelPrefix;\n\tpublic missingModelMessage;\n\tpublic noSuchFilePrefix;\n\tpublic noSuchFileMessage;\n\tpublic stack;\n\n\tconstructor() {\n\t\tthis.personalInfo = 'DANGEROUS/PATH';\n\t\tthis.importantInfo = 'important/information';\n\t\tthis.filePrefix = 'file:///';\n\t\tthis.dangerousPathWithImportantInfo = this.filePrefix + this.personalInfo + '/resources/app/' + this.importantInfo;\n\t\tthis.dangerousPathWithoutImportantInfo = this.filePrefix + this.personalInfo;\n\n\t\tthis.missingModelPrefix = 'Received model events for missing model ';\n\t\tthis.missingModelMessage = this.missingModelPrefix + ' ' + this.dangerousPathWithoutImportantInfo;\n\n\t\tthis.noSuchFilePrefix = 'ENOENT: no such file or directory';\n\t\tthis.noSuchFileMessage = this.noSuchFilePrefix + ' \\'' + this.personalInfo + '\\'';\n\n\t\tthis.stack = ['at e._modelEvents (a/path/that/doesnt/contain/code/names.js:11:7309)',\n\t\t\t'    at t.AllWorkers (a/path/that/doesnt/contain/code/names.js:6:8844)',\n\t\t\t'    at e.(anonymous function) [as _modelEvents] (a/path/that/doesnt/contain/code/names.js:5:29552)',\n\t\t\t'    at Function.<anonymous> (a/path/that/doesnt/contain/code/names.js:6:8272)',\n\t\t\t'    at e.dispatch (a/path/that/doesnt/contain/code/names.js:5:26931)',\n\t\t\t'    at e.request (a/path/that/doesnt/contain/code/names.js:14:1745)',\n\t\t\t'    at t._handleMessage (another/path/that/doesnt/contain/code/names.js:14:17447)',\n\t\t\t'    at t._onmessage (another/path/that/doesnt/contain/code/names.js:14:16976)',\n\t\t\t'    at t.onmessage (another/path/that/doesnt/contain/code/names.js:14:15854)',\n\t\t\t'    at DedicatedWorkerGlobalScope.self.onmessage',\n\t\t\tthis.dangerousPathWithImportantInfo,\n\t\t\tthis.dangerousPathWithoutImportantInfo,\n\t\t\tthis.missingModelMessage,\n\t\t\tthis.noSuchFileMessage];\n\t}\n}\n\nsuite('TelemetryService', () => {\n\n\tclass AppenderCountTelemetryService extends TelemetryService {\n\t\tgetAppendersCount() {\n\t\t\treturn this._appenders.length;\n\t\t}\n\t}\n\n\t// Appenders\n\ttest('No appenders', sinon.test(function() {\n\t\tlet service = new AppenderCountTelemetryService();\n\t\tassert.equal(service.getAppendersCount(), 0);\n\n\t\t// log events\n\t\tservice.publicLog('testEvent');\n\t\tlet timedEvent = service.timedPublicLog('testTimed', { 'somedata': 'test' });\n\t\ttimedEvent.stop();\n\n\t\t//dispose\n\t\tservice.dispose();\n\t}));\n\n\ttest('Add appender', sinon.test(function() {\n\t\tlet service = new AppenderCountTelemetryService();\n\t\tassert.equal(service.getAppendersCount(), 0);\n\n\t\tlet testAppender = new TestTelemetryAppender();\n\t\tservice.addTelemetryAppender(testAppender);\n\n\t\tassert.equal(service.getAppendersCount(), 1);\n\t\tservice.dispose();\n\t}));\n\n\ttest('Remove appender', sinon.test(function() {\n\t\tlet service = new AppenderCountTelemetryService();\n\t\tassert.equal(service.getAppendersCount(), 0);\n\n\t\tlet testAppender = new TestTelemetryAppender();\n\t\tlet registration = service.addTelemetryAppender(testAppender);\n\t\tassert.equal(service.getAppendersCount(), 1);\n\n\t\t//report event\n\t\tservice.publicLog('testEvent');\n\t\tassert.equal(testAppender.getEventsCount(), 1);\n\n\t\t//remove appender\n\t\tregistration.dispose();\n\t\tassert.equal(service.getAppendersCount(), 0);\n\n\t\t//verify events not being sent\n\t\tservice.publicLog('testEvent2');\n\t\tassert.equal(testAppender.getEventsCount(), 1);\n\n\t\tservice.dispose();\n\t}));\n\n\ttest('Multiple appenders', sinon.test(function() {\n\t\tlet service = new AppenderCountTelemetryService();\n\t\tassert.equal(service.getAppendersCount(), 0);\n\n\t\tlet testAppender1 = new TestTelemetryAppender();\n\t\tlet registrgation1 = service.addTelemetryAppender(testAppender1);\n\t\tassert.equal(service.getAppendersCount(), 1);\n\n\t\t//report event\n\t\tservice.publicLog('testEvent');\n\t\tassert.equal(testAppender1.getEventsCount(), 1);\n\n\t\t// add second appender\n\t\tlet testAppender2 = new TestTelemetryAppender();\n\t\tservice.addTelemetryAppender(testAppender2);\n\t\tassert.equal(service.getAppendersCount(), 2);\n\n\t\t//report event\n\t\tservice.publicLog('testEvent2');\n\t\tassert.equal(testAppender1.getEventsCount(), 2);\n\t\tassert.equal(testAppender2.getEventsCount(), 1);\n\n\t\t//remove appender 1\n\t\tregistrgation1.dispose();\n\t\tassert.equal(service.getAppendersCount(), 1);\n\n\t\t//verify events not being sent to the removed appender\n\t\tservice.publicLog('testEvent3');\n\t\tassert.equal(testAppender1.getEventsCount(), 2);\n\t\tassert.equal(testAppender2.getEventsCount(), 2);\n\n\t\tservice.dispose();\n\t}));\n\n\ttest('TelemetryAppendersRegistry, activate', function() {\n\n\t\tlet registry = new Telemetry.TelemetryAppendersRegistry();\n\t\tregistry.registerTelemetryAppenderDescriptor(TestTelemetryAppender);\n\n\t\tlet callCount = 0;\n\t\tlet telemetryService: Telemetry.ITelemetryService = <any> {\n\t\t\taddTelemetryAppender(appender) {\n\t\t\t\tassert.ok(appender);\n\t\t\t\tcallCount += 1;\n\t\t\t}\n\t\t};\n\n\t\tlet instantiationService = InstantiationService.createInstantiationService();\n\t\tinstantiationService.addSingleton(Telemetry.ITelemetryService, telemetryService);\n\t\tregistry.activate(instantiationService);\n\t\tassert.equal(callCount, 1);\n\n\t\t// registry is now active/read-only\n\t\tassert.throws(() => registry.registerTelemetryAppenderDescriptor(TestTelemetryAppender));\n\t\tassert.throws(() => registry.activate(instantiationService));\n\t});\n\n\ttest('Disposing', sinon.test(function() {\n\t\tlet service = new TelemetryService();\n\t\tlet testAppender = new TestTelemetryAppender();\n\t\tservice.addTelemetryAppender(testAppender);\n\n\t\tservice.publicLog('testPrivateEvent');\n\t\tassert.equal(testAppender.getEventsCount(), 1);\n\n\t\tservice.dispose();\n\t\tassert.equal(testAppender.isDisposed, true);\n\t}));\n\n\t// event reporting\n\ttest('Simple event', sinon.test(function() {\n\t\tlet service = new TelemetryService();\n\t\tlet testAppender = new TestTelemetryAppender();\n\n\t\treturn service.getTelemetryInfo().then(info => {\n\n\t\t\tservice.addTelemetryAppender(testAppender);\n\n\t\t\tservice.publicLog('testEvent');\n\t\t\tassert.equal(testAppender.getEventsCount(), 1);\n\t\t\tassert.equal(testAppender.events[0].eventName, 'testEvent');\n\t\t\tassert.notEqual(testAppender.events[0].data, null);\n\t\t\tassert.equal(testAppender.events[0].data['sessionID'], info.sessionId);\n\t\t\tassert.notEqual(testAppender.events[0].data['timestamp'], null);\n\n\t\t\tservice.dispose();\n\t\t});\n\t}));\n\n\ttest('Event with data', sinon.test(function() {\n\t\tlet service = new TelemetryService();\n\t\tlet testAppender = new TestTelemetryAppender();\n\n\t\treturn service.getTelemetryInfo().then(info => {\n\t\t\tservice.addTelemetryAppender(testAppender);\n\n\t\t\tservice.publicLog('testEvent', {\n\t\t\t\t'stringProp': 'property',\n\t\t\t\t'numberProp': 1,\n\t\t\t\t'booleanProp': true,\n\t\t\t\t'complexProp': {\n\t\t\t\t\t'value': 0\n\t\t\t\t}\n\t\t\t});\n\t\t\tassert.equal(testAppender.getEventsCount(), 1);\n\t\t\tassert.equal(testAppender.events[0].eventName, 'testEvent');\n\t\t\tassert.notEqual(testAppender.events[0].data, null);\n\t\t\tassert.equal(testAppender.events[0].data['sessionID'], info.sessionId);\n\t\t\tassert.notEqual(testAppender.events[0].data['timestamp'], null);\n\t\t\tassert.equal(testAppender.events[0].data['stringProp'], 'property');\n\t\t\tassert.equal(testAppender.events[0].data['numberProp'], 1);\n\t\t\tassert.equal(testAppender.events[0].data['booleanProp'], true);\n\t\t\tassert.equal(testAppender.events[0].data['complexProp'].value, 0);\n\n\t\t\tservice.dispose();\n\t\t});\n\n\t}));\n\n\ttest('Telemetry Timer events', sinon.test(function() {\n\t\tTimer.ENABLE_TIMER = true;\n\n\t\tlet service = new TelemetryService();\n\t\tlet testAppender = new TestTelemetryAppender();\n\t\tservice.addTelemetryAppender(testAppender);\n\n\t\tlet t1 = service.timedPublicLog('editorDance');\n\t\tthis.clock.tick(20);\n\t\tlet t2 = service.timedPublicLog('editorSwoon', null);\n\t\tthis.clock.tick(20);\n\n\t\tt1.stop(new Date());\n\t\tt2.stop(new Date());\n\n\t\tlet t3 = service.timedPublicLog('editorMove', { someData: 'data' });\n\t\tthis.clock.tick(30);\n\t\tt3.stop(new Date());\n\n\t\tassert.equal(testAppender.getEventsCount(), 3);\n\n\t\tassert.equal(testAppender.events[0].eventName, 'editorDance');\n\t\tassert.equal(testAppender.events[0].data.duration, 40);\n\n\t\tassert.equal(testAppender.events[1].eventName, 'editorSwoon');\n\t\tassert.equal(testAppender.events[1].data.duration, 20);\n\n\t\tassert.equal(testAppender.events[2].eventName, 'editorMove');\n\t\tassert.equal(testAppender.events[2].data.duration, 30);\n\t\tassert.equal(testAppender.events[2].data.someData, 'data');\n\n\t\tservice.dispose();\n\t\tTimer.ENABLE_TIMER = false;\n\t}));\n\n\ttest('enableTelemetry on by default', sinon.test(function() {\n\t\tlet service = new TelemetryService();\n\t\tlet testAppender = new TestTelemetryAppender();\n\t\tservice.addTelemetryAppender(testAppender);\n\n\t\tservice.publicLog('testEvent');\n\t\tassert.equal(testAppender.getEventsCount(), 1);\n\t\tassert.equal(testAppender.events[0].eventName, 'testEvent');\n\n\t\tservice.dispose();\n\t}));\n\n\ttest('Error events', sinon.test(function() {\n\n\t\tlet origErrorHandler = Errors.errorHandler.getUnexpectedErrorHandler();\n\t\tErrors.setUnexpectedErrorHandler(() => { });\n\n\t\ttry {\n\t\t\tlet service = new TelemetryService();\n\t\t\tlet testAppender = new TestTelemetryAppender();\n\t\t\tservice.addTelemetryAppender(testAppender);\n\n\n\t\t\tlet e: any = new Error('This is a test.');\n\t\t\t// for Phantom\n\t\t\tif (!e.stack) {\n\t\t\t\te.stack = 'blah';\n\t\t\t}\n\n\t\t\tErrors.onUnexpectedError(e);\n\t\t\tthis.clock.tick(TelemetryService.ERROR_FLUSH_TIMEOUT);\n\t\t\tassert.equal(testAppender.getEventsCount(), 1);\n\t\t\tassert.equal(testAppender.events[0].eventName, 'UnhandledError');\n\t\t\tassert.equal(testAppender.events[0].data.message, 'This is a test.');\n\n\t\t\tservice.dispose();\n\t\t} finally {\n\t\t\tErrors.setUnexpectedErrorHandler(origErrorHandler);\n\t\t}\n\t}));\n\n\t// \ttest('Unhandled Promise Error events', sinon.test(function() {\n\t//\n\t// \t\tlet origErrorHandler = Errors.errorHandler.getUnexpectedErrorHandler();\n\t// \t\tErrors.setUnexpectedErrorHandler(() => {});\n\t//\n\t// \t\ttry {\n\t// \t\t\tlet service = new MainTelemetryService();\n\t// \t\t\tlet testAppender = new TestTelemetryAppender();\n\t// \t\t\tservice.addTelemetryAppender(testAppender);\n\t//\n\t// \t\t\twinjs.Promise.wrapError('This should not get logged');\n\t// \t\t\twinjs.TPromise.as(true).then(() => {\n\t// \t\t\t\tthrow new Error('This should get logged');\n\t// \t\t\t});\n\t// \t\t\t// prevent console output from failing the test\n\t// \t\t\tthis.stub(console, 'log');\n\t// \t\t\t// allow for the promise to finish\n\t// \t\t\tthis.clock.tick(MainTelemetryService.ERROR_FLUSH_TIMEOUT);\n\t//\n\t// \t\t\tassert.equal(testAppender.getEventsCount(), 1);\n\t// \t\t\tassert.equal(testAppender.events[0].eventName, 'UnhandledError');\n\t// \t\t\tassert.equal(testAppender.events[0].data.message,  'This should get logged');\n\t//\n\t// \t\t\tservice.dispose();\n\t// \t\t} finally {\n\t// \t\t\tErrors.setUnexpectedErrorHandler(origErrorHandler);\n\t// \t\t}\n\t// \t}));\n\n\ttest('Handle global errors', sinon.test(function() {\n\t\tlet errorStub = this.stub(window, 'onerror');\n\n\t\tlet service = new TelemetryService();\n\t\tlet testAppender = new TestTelemetryAppender();\n\t\tservice.addTelemetryAppender(testAppender);\n\n\t\tlet testError = new Error('test');\n\t\t(<any>window.onerror)('Error Message', 'file.js', 2, 42, testError);\n\t\tthis.clock.tick(TelemetryService.ERROR_FLUSH_TIMEOUT);\n\n\t\tassert.equal(errorStub.alwaysCalledWithExactly('Error Message', 'file.js', 2, 42, testError), true);\n\t\tassert.equal(errorStub.callCount, 1);\n\n\t\tassert.equal(testAppender.getEventsCount(), 1);\n\t\tassert.equal(testAppender.events[0].eventName, 'UnhandledError');\n\t\tassert.equal(testAppender.events[0].data.message, 'Error Message');\n\t\tassert.equal(testAppender.events[0].data.filename, 'file.js');\n\t\tassert.equal(testAppender.events[0].data.line, 2);\n\t\tassert.equal(testAppender.events[0].data.column, 42);\n\t\tassert.equal(testAppender.events[0].data.error.message, 'test');\n\n\t\tservice.dispose();\n\t}));\n\n\ttest('Uncaught Error Telemetry removes PII from filename', sinon.test(function() {\n\t\tlet errorStub = this.stub(window, 'onerror');\n\t\tlet settings = new ErrorTestingSettings();\n\t\tlet service = new TelemetryService();\n\t\tlet testAppender = new TestTelemetryAppender();\n\t\tservice.addTelemetryAppender(testAppender);\n\n\t\tlet dangerousFilenameError: any = new Error('dangerousFilename');\n\t\tdangerousFilenameError.stack = settings.stack;\n\t\t(<any>window.onerror)('dangerousFilename', settings.dangerousPathWithImportantInfo + '/test.js', 2, 42, dangerousFilenameError);\n\t\tthis.clock.tick(TelemetryService.ERROR_FLUSH_TIMEOUT);\n\n\t\tassert.equal(errorStub.callCount, 1);\n\t\tassert.equal(testAppender.events[0].data.filename.indexOf(settings.dangerousPathWithImportantInfo), -1);\n\n\t\tdangerousFilenameError = new Error('dangerousFilename');\n\t\tdangerousFilenameError.stack = settings.stack;\n\t\t(<any>window.onerror)('dangerousFilename', settings.dangerousPathWithImportantInfo + '/test.js', 2, 42, dangerousFilenameError);\n\t\tthis.clock.tick(TelemetryService.ERROR_FLUSH_TIMEOUT);\n\n\t\tassert.equal(errorStub.callCount, 2);\n\t\tassert.equal(testAppender.events[0].data.filename.indexOf(settings.dangerousPathWithImportantInfo), -1);\n\t\tassert.equal(testAppender.events[0].data.filename, '<APP_ROOT>' + settings.importantInfo + '/test.js');\n\n\t\tservice.dispose();\n\t}));\n\n\ttest('Unexpected Error Telemetry removes PII', sinon.test(function() {\n\t\tlet origErrorHandler = Errors.errorHandler.getUnexpectedErrorHandler();\n\t\tErrors.setUnexpectedErrorHandler(() => { });\n\t\ttry {\n\t\t\tlet settings = new ErrorTestingSettings();\n\t\t\tlet service = new TelemetryService();\n\t\t\tlet testAppender = new TestTelemetryAppender();\n\t\t\tservice.addTelemetryAppender(testAppender);\n\n\t\t\tlet dangerousPathWithoutImportantInfoError: any = new Error(settings.dangerousPathWithoutImportantInfo);\n\t\t\tdangerousPathWithoutImportantInfoError.stack = settings.stack;\n\t\t\tErrors.onUnexpectedError(dangerousPathWithoutImportantInfoError);\n\t\t\tthis.clock.tick(TelemetryService.ERROR_FLUSH_TIMEOUT);\n\n\t\t\tassert.equal(testAppender.events[0].data.message.indexOf(settings.personalInfo), -1);\n\t\t\tassert.equal(testAppender.events[0].data.message.indexOf(settings.filePrefix), -1);\n\n\t\t\tassert.equal(testAppender.events[0].data.stack.indexOf(settings.personalInfo), -1);\n\t\t\tassert.equal(testAppender.events[0].data.stack.indexOf(settings.filePrefix), -1);\n\t\t\tassert.notEqual(testAppender.events[0].data.stack.indexOf(settings.stack[4]), -1);\n\t\t\tassert.equal(testAppender.events[0].data.stack.split('\\n').length, settings.stack.length);\n\n\t\t\tservice.dispose();\n\t\t}\n\t\tfinally {\n\t\t\tErrors.setUnexpectedErrorHandler(origErrorHandler);\n\t\t}\n\t}));\n\n\ttest('Uncaught Error Telemetry removes PII', sinon.test(function() {\n\t\tlet errorStub = this.stub(window, 'onerror');\n\t\tlet settings = new ErrorTestingSettings();\n\t\tlet service = new TelemetryService();\n\t\tlet testAppender = new TestTelemetryAppender();\n\t\tservice.addTelemetryAppender(testAppender);\n\n\t\tlet dangerousPathWithoutImportantInfoError: any = new Error('dangerousPathWithoutImportantInfo');\n\t\tdangerousPathWithoutImportantInfoError.stack = settings.stack;\n\t\t(<any>window.onerror)(settings.dangerousPathWithoutImportantInfo, 'test.js', 2, 42, dangerousPathWithoutImportantInfoError);\n\t\tthis.clock.tick(TelemetryService.ERROR_FLUSH_TIMEOUT);\n\n\t\tassert.equal(errorStub.callCount, 1);\n\t\t// Test that no file information remains, esp. personal info\n\t\tassert.equal(testAppender.events[0].data.message.indexOf(settings.personalInfo), -1);\n\t\tassert.equal(testAppender.events[0].data.message.indexOf(settings.filePrefix), -1);\n\t\tassert.equal(testAppender.events[0].data.stack.indexOf(settings.personalInfo), -1);\n\t\tassert.equal(testAppender.events[0].data.stack.indexOf(settings.filePrefix), -1);\n\t\tassert.notEqual(testAppender.events[0].data.stack.indexOf(settings.stack[4]), -1);\n\t\tassert.equal(testAppender.events[0].data.stack.split('\\n').length, settings.stack.length);\n\n\t\tservice.dispose();\n\t}));\n\n\ttest('Unexpected Error Telemetry removes PII but preserves Code file path', sinon.test(function() {\n\n\t\tlet origErrorHandler = Errors.errorHandler.getUnexpectedErrorHandler();\n\t\tErrors.setUnexpectedErrorHandler(() => { });\n\n\t\ttry {\n\t\t\tlet settings = new ErrorTestingSettings();\n\t\t\tlet service = new TelemetryService();\n\t\t\tlet testAppender = new TestTelemetryAppender();\n\t\t\tservice.addTelemetryAppender(testAppender);\n\n\t\t\tlet dangerousPathWithImportantInfoError: any = new Error(settings.dangerousPathWithImportantInfo);\n\t\t\tdangerousPathWithImportantInfoError.stack = settings.stack;\n\n\t\t\t// Test that important information remains but personal info does not\n\t\t\tErrors.onUnexpectedError(dangerousPathWithImportantInfoError);\n\t\t\tthis.clock.tick(TelemetryService.ERROR_FLUSH_TIMEOUT);\n\n\t\t\tassert.notEqual(testAppender.events[0].data.message.indexOf(settings.importantInfo), -1);\n\t\t\tassert.equal(testAppender.events[0].data.message.indexOf(settings.personalInfo), -1);\n\t\t\tassert.equal(testAppender.events[0].data.message.indexOf(settings.filePrefix), -1);\n\t\t\tassert.notEqual(testAppender.events[0].data.stack.indexOf(settings.importantInfo), -1);\n\t\t\tassert.equal(testAppender.events[0].data.stack.indexOf(settings.personalInfo), -1);\n\t\t\tassert.equal(testAppender.events[0].data.stack.indexOf(settings.filePrefix), -1);\n\t\t\tassert.notEqual(testAppender.events[0].data.stack.indexOf(settings.stack[4]), -1);\n\t\t\tassert.equal(testAppender.events[0].data.stack.split('\\n').length, settings.stack.length);\n\n\t\t\tservice.dispose();\n\t\t}\n\t\tfinally {\n\t\t\tErrors.setUnexpectedErrorHandler(origErrorHandler);\n\t\t}\n\t}));\n\n\ttest('Uncaught Error Telemetry removes PII but preserves Code file path', sinon.test(function() {\n\t\tlet errorStub = this.stub(window, 'onerror');\n\t\tlet settings = new ErrorTestingSettings();\n\t\tlet service = new TelemetryService();\n\t\tlet testAppender = new TestTelemetryAppender();\n\t\tservice.addTelemetryAppender(testAppender);\n\n\t\tlet dangerousPathWithImportantInfoError: any = new Error('dangerousPathWithImportantInfo');\n\t\tdangerousPathWithImportantInfoError.stack = settings.stack;\n\t\t(<any>window.onerror)(settings.dangerousPathWithImportantInfo, 'test.js', 2, 42, dangerousPathWithImportantInfoError);\n\t\tthis.clock.tick(TelemetryService.ERROR_FLUSH_TIMEOUT);\n\n\t\tassert.equal(errorStub.callCount, 1);\n\t\t// Test that important information remains but personal info does not\n\t\tassert.notEqual(testAppender.events[0].data.message.indexOf(settings.importantInfo), -1);\n\t\tassert.equal(testAppender.events[0].data.message.indexOf(settings.personalInfo), -1);\n\t\tassert.equal(testAppender.events[0].data.message.indexOf(settings.filePrefix), -1);\n\t\tassert.notEqual(testAppender.events[0].data.stack.indexOf(settings.importantInfo), -1);\n\t\tassert.equal(testAppender.events[0].data.stack.indexOf(settings.personalInfo), -1);\n\t\tassert.equal(testAppender.events[0].data.stack.indexOf(settings.filePrefix), -1);\n\t\tassert.notEqual(testAppender.events[0].data.stack.indexOf(settings.stack[4]), -1);\n\t\tassert.equal(testAppender.events[0].data.stack.split('\\n').length, settings.stack.length);\n\n\t\tservice.dispose();\n\t}));\n\n\ttest('Unexpected Error Telemetry removes PII but preserves Missing Model error message', sinon.test(function() {\n\n\t\tlet origErrorHandler = Errors.errorHandler.getUnexpectedErrorHandler();\n\t\tErrors.setUnexpectedErrorHandler(() => { });\n\n\t\ttry {\n\t\t\tlet settings = new ErrorTestingSettings();\n\t\t\tlet service = new TelemetryService();\n\t\t\tlet testAppender = new TestTelemetryAppender();\n\t\t\tservice.addTelemetryAppender(testAppender);\n\n\t\t\tlet missingModelError: any = new Error(settings.missingModelMessage);\n\t\t\tmissingModelError.stack = settings.stack;\n\n\t\t\t// Test that no file information remains, but this particular\n\t\t\t// error message does (Received model events for missing model)\n\t\t\tErrors.onUnexpectedError(missingModelError);\n\t\t\tthis.clock.tick(TelemetryService.ERROR_FLUSH_TIMEOUT);\n\n\t\t\tassert.notEqual(testAppender.events[0].data.message.indexOf(settings.missingModelPrefix), -1);\n\t\t\tassert.equal(testAppender.events[0].data.message.indexOf(settings.personalInfo), -1);\n\t\t\tassert.equal(testAppender.events[0].data.message.indexOf(settings.filePrefix), -1);\n\t\t\tassert.notEqual(testAppender.events[0].data.stack.indexOf(settings.missingModelPrefix), -1);\n\t\t\tassert.equal(testAppender.events[0].data.stack.indexOf(settings.personalInfo), -1);\n\t\t\tassert.equal(testAppender.events[0].data.stack.indexOf(settings.filePrefix), -1);\n\t\t\tassert.notEqual(testAppender.events[0].data.stack.indexOf(settings.stack[4]), -1);\n\t\t\tassert.equal(testAppender.events[0].data.stack.split('\\n').length, settings.stack.length);\n\n\t\t\tservice.dispose();\n\t\t} finally {\n\t\t\tErrors.setUnexpectedErrorHandler(origErrorHandler);\n\t\t}\n\t}));\n\n\ttest('Uncaught Error Telemetry removes PII but preserves Missing Model error message', sinon.test(function() {\n\t\tlet errorStub = this.stub(window, 'onerror');\n\t\tlet settings = new ErrorTestingSettings();\n\t\tlet service = new TelemetryService();\n\t\tlet testAppender = new TestTelemetryAppender();\n\t\tservice.addTelemetryAppender(testAppender);\n\n\t\tlet missingModelError: any = new Error('missingModelMessage');\n\t\tmissingModelError.stack = settings.stack;\n\t\t(<any>window.onerror)(settings.missingModelMessage, 'test.js', 2, 42, missingModelError);\n\t\tthis.clock.tick(TelemetryService.ERROR_FLUSH_TIMEOUT);\n\n\t\tassert.equal(errorStub.callCount, 1);\n\t\t// Test that no file information remains, but this particular\n\t\t// error message does (Received model events for missing model)\n\t\tassert.notEqual(testAppender.events[0].data.message.indexOf(settings.missingModelPrefix), -1);\n\t\tassert.equal(testAppender.events[0].data.message.indexOf(settings.personalInfo), -1);\n\t\tassert.equal(testAppender.events[0].data.message.indexOf(settings.filePrefix), -1);\n\t\tassert.notEqual(testAppender.events[0].data.stack.indexOf(settings.missingModelPrefix), -1);\n\t\tassert.equal(testAppender.events[0].data.stack.indexOf(settings.personalInfo), -1);\n\t\tassert.equal(testAppender.events[0].data.stack.indexOf(settings.filePrefix), -1);\n\t\tassert.notEqual(testAppender.events[0].data.stack.indexOf(settings.stack[4]), -1);\n\t\tassert.equal(testAppender.events[0].data.stack.split('\\n').length, settings.stack.length);\n\n\t\tservice.dispose();\n\t}));\n\n\ttest('Unexpected Error Telemetry removes PII but preserves No Such File error message', sinon.test(function() {\n\n\t\tlet origErrorHandler = Errors.errorHandler.getUnexpectedErrorHandler();\n\t\tErrors.setUnexpectedErrorHandler(() => { });\n\n\t\ttry {\n\t\t\tlet settings = new ErrorTestingSettings();\n\t\t\tlet service = new TelemetryService();\n\t\t\tlet testAppender = new TestTelemetryAppender();\n\t\t\tservice.addTelemetryAppender(testAppender);\n\n\t\t\tlet noSuchFileError: any = new Error(settings.noSuchFileMessage);\n\t\t\tnoSuchFileError.stack = settings.stack;\n\n\t\t\t// Test that no file information remains, but this particular\n\t\t\t// error message does (ENOENT: no such file or directory)\n\t\t\tErrors.onUnexpectedError(noSuchFileError);\n\t\t\tthis.clock.tick(TelemetryService.ERROR_FLUSH_TIMEOUT);\n\n\t\t\tassert.notEqual(testAppender.events[0].data.message.indexOf(settings.noSuchFilePrefix), -1);\n\t\t\tassert.equal(testAppender.events[0].data.message.indexOf(settings.personalInfo), -1);\n\t\t\tassert.equal(testAppender.events[0].data.message.indexOf(settings.filePrefix), -1);\n\t\t\tassert.notEqual(testAppender.events[0].data.stack.indexOf(settings.noSuchFilePrefix), -1);\n\t\t\tassert.equal(testAppender.events[0].data.stack.indexOf(settings.personalInfo), -1);\n\t\t\tassert.equal(testAppender.events[0].data.stack.indexOf(settings.filePrefix), -1);\n\t\t\tassert.notEqual(testAppender.events[0].data.stack.indexOf(settings.stack[4]), -1);\n\t\t\tassert.equal(testAppender.events[0].data.stack.split('\\n').length, settings.stack.length);\n\n\t\t\tservice.dispose();\n\t\t} finally {\n\t\t\tErrors.setUnexpectedErrorHandler(origErrorHandler);\n\t\t}\n\t}));\n\n\ttest('Uncaught Error Telemetry removes PII but preserves No Such File error message', sinon.test(function() {\n\t\tlet origErrorHandler = Errors.errorHandler.getUnexpectedErrorHandler();\n\t\tErrors.setUnexpectedErrorHandler(() => { });\n\n\t\ttry {\n\t\t\tlet errorStub = this.stub(window, 'onerror');\n\t\t\tlet settings = new ErrorTestingSettings();\n\t\t\tlet service = new TelemetryService();\n\t\t\tlet testAppender = new TestTelemetryAppender();\n\t\t\tservice.addTelemetryAppender(testAppender);\n\n\t\t\tlet noSuchFileError: any = new Error('noSuchFileMessage');\n\t\t\tnoSuchFileError.stack = settings.stack;\n\t\t\t(<any>window.onerror)(settings.noSuchFileMessage, 'test.js', 2, 42, noSuchFileError);\n\t\t\tthis.clock.tick(TelemetryService.ERROR_FLUSH_TIMEOUT);\n\n\t\t\tassert.equal(errorStub.callCount, 1);\n\t\t\t// Test that no file information remains, but this particular\n\t\t\t// error message does (ENOENT: no such file or directory)\n\t\t\tErrors.onUnexpectedError(noSuchFileError);\n\t\t\tassert.notEqual(testAppender.events[0].data.message.indexOf(settings.noSuchFilePrefix), -1);\n\t\t\tassert.equal(testAppender.events[0].data.message.indexOf(settings.personalInfo), -1);\n\t\t\tassert.equal(testAppender.events[0].data.message.indexOf(settings.filePrefix), -1);\n\t\t\tassert.notEqual(testAppender.events[0].data.stack.indexOf(settings.noSuchFilePrefix), -1);\n\t\t\tassert.equal(testAppender.events[0].data.stack.indexOf(settings.personalInfo), -1);\n\t\t\tassert.equal(testAppender.events[0].data.stack.indexOf(settings.filePrefix), -1);\n\t\t\tassert.notEqual(testAppender.events[0].data.stack.indexOf(settings.stack[4]), -1);\n\t\t\tassert.equal(testAppender.events[0].data.stack.split('\\n').length, settings.stack.length);\n\n\t\t\tservice.dispose();\n\t\t} finally {\n\t\t\tErrors.setUnexpectedErrorHandler(origErrorHandler);\n\t\t}\n\t}));\n\n\ttest('Test hard idle does not affect sending normal events in active state', sinon.test(function() {\n\n\t\tlet service = new TelemetryService({ enableHardIdle: true, enableSoftIdle: false });\n\t\tlet testAppender = new TestTelemetryAppender();\n\t\tservice.addTelemetryAppender(testAppender);\n\n\t\t//report an event\n\t\tservice.publicLog('testEvent');\n\n\t\t//verify that the event is not being sent\n\t\tassert.equal(testAppender.getEventsCount(), 1);\n\n\t\tservice.dispose();\n\t}));\n\n\n\ttest('Test hard idle stops events from being sent in idle state', sinon.test(function() {\n\n\t\tlet service = new TelemetryService({ enableHardIdle: true, enableSoftIdle: false });\n\t\tlet testAppender = new TestTelemetryAppender();\n\t\tservice.addTelemetryAppender(testAppender);\n\n\t\t// make the user idle\n\t\tthis.clock.tick(IdleMonitor.DEFAULT_IDLE_TIME);\n\n\t\t//report an event\n\t\tservice.publicLog('testEvent');\n\n\t\t//verify that the event is not being sent\n\t\tassert.equal(testAppender.getEventsCount(), 0);\n\n\t\tservice.dispose();\n\t}));\n\n\ttest('Test soft idle start/stop events', sinon.test(function() {\n\n\t\tlet activeListener: () => void = null;\n\t\tlet idleListener: () => void = null;\n\n\t\tfunction MockIdleMonitor(timeout: number): void {\n\t\t\tassert.equal(timeout, TelemetryService.SOFT_IDLE_TIME);\n\t\t}\n\n\t\tMockIdleMonitor.prototype.addOneTimeActiveListener = function(callback: () => void): void {\n\t\t\tactiveListener = callback;\n\t\t};\n\n\t\tMockIdleMonitor.prototype.addOneTimeIdleListener = function(callback: () => void): void {\n\t\t\tidleListener = callback;\n\t\t};\n\n\t\tMockIdleMonitor.prototype.dispose = function() {\n\t\t\t// empty\n\t\t};\n\n\t\tthis.stub(IdleMonitor, 'IdleMonitor', MockIdleMonitor);\n\n\t\tlet service = new TelemetryService({ enableHardIdle: false, enableSoftIdle: true });\n\t\tlet testAppender = new TestTelemetryAppender();\n\t\tservice.addTelemetryAppender(testAppender);\n\n\n\t\tassert.equal(testAppender.getEventsCount(), 0);\n\n\t\tidleListener();\n\t\tactiveListener();\n\t\tidleListener();\n\t\tactiveListener();\n\n\t\t//verify that two idle happened\n\t\tassert.equal(testAppender.getEventsCount(), 4);\n\t\t//first idle\n\t\tassert.equal(testAppender.events[0].eventName, TelemetryService.IDLE_START_EVENT_NAME);\n\t\tassert.equal(testAppender.events[1].eventName, TelemetryService.IDLE_STOP_EVENT_NAME);\n\t\t//second idle\n\t\tassert.equal(testAppender.events[2].eventName, TelemetryService.IDLE_START_EVENT_NAME);\n\t\tassert.equal(testAppender.events[3].eventName, TelemetryService.IDLE_STOP_EVENT_NAME);\n\n\t\tservice.dispose();\n\t}));\n\n\ttest('Telemetry Service uses provided session ID', sinon.test(function() {\n\n\t\tlet testSessionId = 'test session id';\n\t\tlet service = new TelemetryService({ sessionID: testSessionId });\n\n\t\treturn service.getTelemetryInfo().then(info => {\n\t\t\tassert.equal(info.sessionId, testSessionId);\n\t\t\tservice.dispose();\n\t\t});\n\t}));\n\n\ttest('Telemetry Service respects user opt-in settings', sinon.test(function() {\n\t\tlet service = new TelemetryService({userOptIn: false });\n\t\tlet testAppender = new TestTelemetryAppender();\n\t\tservice.addTelemetryAppender(testAppender);\n\n\t\tservice.publicLog('testEvent');\n\t\tassert.equal(testAppender.getEventsCount(), 0);\n\n\t\tservice.dispose();\n\t}));\n\n\ttest('Telemetry Service sends events when enableTelemetry is on even user optin is on', sinon.test(function() {\n\t\tlet service = new TelemetryService({userOptIn: true });\n\t\tlet testAppender = new TestTelemetryAppender();\n\t\tservice.addTelemetryAppender(testAppender);\n\n\t\tservice.publicLog('testEvent');\n\t\tassert.equal(testAppender.getEventsCount(), 1);\n\n\t\tservice.dispose();\n\t}));\n\n\ttest('Telemetry Service allows optin friendly events', sinon.test(function() {\n\t\tlet service = new TelemetryService({userOptIn: false });\n\t\tlet testAppender = new TestTelemetryAppender();\n\t\tservice.addTelemetryAppender(testAppender);\n\n\t\tservice.publicLog('testEvent');\n\t\tassert.equal(testAppender.getEventsCount(), 0);\n\n\t\tservice.publicLog(optInStatusEventName, {userOptIn: false});\n\t\tassert.equal(testAppender.getEventsCount(), 1);\n\t\tassert.equal(testAppender.events[0].eventName, optInStatusEventName);\n\t\tassert.equal(testAppender.events[0].data.userOptIn, false);\n\t\tservice.dispose();\n\t}));\n});"]}