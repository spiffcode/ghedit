{"version":3,"file":"vs/editor/common/viewModel/splitLinesCollection.js","sourceRoot":"file:///Users/darrin/src/vscode/src","sources":["vs/editor/common/viewModel/splitLinesCollection.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport {Position} from 'vs/editor/common/core/position';\nimport {Range} from 'vs/editor/common/core/range';\nimport * as editorCommon from 'vs/editor/common/editorCommon';\nimport {FilteredLineTokens, IdentityFilteredLineTokens} from 'vs/editor/common/viewModel/filteredLineTokens';\nimport {PrefixSumComputer} from 'vs/editor/common/viewModel/prefixSumComputer';\nimport {ILinesCollection} from 'vs/editor/common/viewModel/viewModel';\n\nexport class OutputPosition {\n\t_outputPositionTrait: void;\n\toutputLineIndex: number;\n\toutputOffset: number;\n\n\tconstructor(outputLineIndex: number, outputOffset: number) {\n\t\tthis.outputLineIndex = outputLineIndex;\n\t\tthis.outputOffset = outputOffset;\n\t}\n}\n\nexport interface ILineMapping {\n\tgetOutputLineCount(): number;\n\tgetWrappedLinesIndent(): string;\n\tgetInputOffsetOfOutputPosition(outputLineIndex:number, outputOffset:number): number;\n\tgetOutputPositionOfInputOffset(inputOffset:number): OutputPosition;\n}\n\nexport interface ILineMapperFactory {\n\tcreateLineMapping(lineText: string, tabSize: number, wrappingColumn: number, columnsForFullWidthChar:number, wrappingIndent:editorCommon.WrappingIndent): ILineMapping;\n}\n\nexport interface IModel {\n\tgetLineTokens(lineNumber:number, inaccurateTokensAcceptable:boolean): editorCommon.ILineTokens;\n\tgetLineContent(lineNumber:number): string;\n\tgetLineMinColumn(lineNumber:number): number;\n\tgetLineMaxColumn(lineNumber:number): number;\n}\n\nexport interface ISplitLine {\n\tisVisible():boolean;\n\tsetVisible(isVisible:boolean):void;\n\tgetOutputLineCount(): number;\n\tgetOutputLineContent(model: IModel, myLineNumber: number, outputLineIndex: number): string;\n\tgetOutputLineMinColumn(model: IModel, myLineNumber: number, outputLineIndex: number): number;\n\tgetOutputLineMaxColumn(model: IModel, myLineNumber: number, outputLineIndex: number): number;\n\tgetOutputLineTokens(model: IModel, myLineNumber: number, outputLineIndex: number): editorCommon.ViewLineTokens;\n\tgetInputColumnOfOutputPosition(outputLineIndex: number, outputColumn: number): number;\n\tgetOutputPositionOfInputPosition(deltaLineNumber: number, inputColumn: number): editorCommon.IEditorPosition;\n}\n\nclass IdentitySplitLine implements ISplitLine {\n\n\tprivate _isVisible: boolean;\n\n\tpublic constructor(isVisible: boolean) {\n\t\tthis._isVisible = isVisible;\n\t}\n\n\tpublic isVisible():boolean {\n\t\treturn this._isVisible;\n\t}\n\n\tpublic setVisible(isVisible:boolean):void {\n\t\tthis._isVisible = isVisible;\n\t}\n\n\tpublic getOutputLineCount(): number {\n\t\tif (!this._isVisible) {\n\t\t\treturn 0;\n\t\t}\n\t\treturn 1;\n\t}\n\n\tpublic getOutputLineContent(model:IModel, myLineNumber:number, outputLineIndex:number): string {\n\t\tif (!this._isVisible) {\n\t\t\tthrow new Error('Not supported');\n\t\t}\n\t\treturn model.getLineContent(myLineNumber);\n\t}\n\n\tpublic getOutputLineMinColumn(model: IModel, myLineNumber: number, outputLineIndex: number): number {\n\t\tif (!this._isVisible) {\n\t\t\tthrow new Error('Not supported');\n\t\t}\n\t\treturn model.getLineMinColumn(myLineNumber);\n\t}\n\n\tpublic getOutputLineMaxColumn(model:IModel, myLineNumber:number, outputLineIndex:number): number {\n\t\tif (!this._isVisible) {\n\t\t\tthrow new Error('Not supported');\n\t\t}\n\t\treturn model.getLineMaxColumn(myLineNumber);\n\t}\n\n\tpublic getOutputLineTokens(model:IModel, myLineNumber:number, outputLineIndex:number): editorCommon.ViewLineTokens {\n\t\tif (!this._isVisible) {\n\t\t\tthrow new Error('Not supported');\n\t\t}\n\t\treturn IdentityFilteredLineTokens.create(model.getLineTokens(myLineNumber, true), model.getLineMaxColumn(myLineNumber) - 1);\n\t}\n\n\tpublic getInputColumnOfOutputPosition(outputLineIndex:number, outputColumn:number): number {\n\t\tif (!this._isVisible) {\n\t\t\tthrow new Error('Not supported');\n\t\t}\n\t\treturn outputColumn;\n\t}\n\n\tpublic getOutputPositionOfInputPosition(deltaLineNumber:number, inputColumn:number): editorCommon.IEditorPosition {\n\t\tif (!this._isVisible) {\n\t\t\tthrow new Error('Not supported');\n\t\t}\n\t\treturn new Position(deltaLineNumber, inputColumn);\n\t}\n}\n\nexport class SplitLine implements ISplitLine {\n\n\tprivate positionMapper:ILineMapping;\n\tprivate outputLineCount:number;\n\n\tprivate wrappedIndent:string;\n\tprivate wrappedIndentLength:number;\n\tprivate _isVisible: boolean;\n\n\tconstructor(positionMapper:ILineMapping, isVisible: boolean) {\n\t\tthis.positionMapper = positionMapper;\n\t\tthis.wrappedIndent = this.positionMapper.getWrappedLinesIndent();\n\t\tthis.wrappedIndentLength = this.wrappedIndent.length;\n\t\tthis.outputLineCount = this.positionMapper.getOutputLineCount();\n\t\tthis._isVisible = isVisible;\n\t}\n\n\tpublic isVisible():boolean {\n\t\treturn this._isVisible;\n\t}\n\n\tpublic setVisible(isVisible:boolean):void {\n\t\tthis._isVisible = isVisible;\n\t}\n\n\tpublic getOutputLineCount(): number {\n\t\tif (!this._isVisible) {\n\t\t\treturn 0;\n\t\t}\n\t\treturn this.outputLineCount;\n\t}\n\n\tprivate getInputStartOffsetOfOutputLineIndex(outputLineIndex:number): number {\n\t\treturn this.positionMapper.getInputOffsetOfOutputPosition(outputLineIndex, 0);\n\t}\n\n\tprivate getInputEndOffsetOfOutputLineIndex(model:IModel, myLineNumber:number, outputLineIndex:number): number {\n\t\tif (outputLineIndex + 1 === this.outputLineCount) {\n\t\t\treturn model.getLineMaxColumn(myLineNumber) - 1;\n\t\t}\n\t\treturn this.positionMapper.getInputOffsetOfOutputPosition(outputLineIndex + 1, 0);\n\t}\n\n\tpublic getOutputLineContent(model:IModel, myLineNumber:number, outputLineIndex:number): string {\n\t\tif (!this._isVisible) {\n\t\t\tthrow new Error('Not supported');\n\t\t}\n\t\tlet startOffset = this.getInputStartOffsetOfOutputLineIndex(outputLineIndex);\n\t\tlet endOffset = this.getInputEndOffsetOfOutputLineIndex(model, myLineNumber, outputLineIndex);\n\t\tlet r = model.getLineContent(myLineNumber).substring(startOffset, endOffset);\n\n\t\tif (outputLineIndex > 0) {\n\t\t\tr = this.wrappedIndent + r;\n\t\t}\n\n\t\treturn r;\n\t}\n\n\n\tpublic getOutputLineMinColumn(model:IModel, myLineNumber:number, outputLineIndex:number): number {\n\t\tif (!this._isVisible) {\n\t\t\tthrow new Error('Not supported');\n\t\t}\n\t\tif (outputLineIndex > 0) {\n\t\t\treturn this.wrappedIndentLength + 1;\n\t\t}\n\t\treturn 1;\n\t}\n\n\tpublic getOutputLineMaxColumn(model:IModel, myLineNumber:number, outputLineIndex:number): number {\n\t\tif (!this._isVisible) {\n\t\t\tthrow new Error('Not supported');\n\t\t}\n\t\treturn this.getOutputLineContent(model, myLineNumber, outputLineIndex).length + 1;\n\t}\n\n\tpublic getOutputLineTokens(model:IModel, myLineNumber:number, outputLineIndex:number): editorCommon.ViewLineTokens {\n\t\tif (!this._isVisible) {\n\t\t\tthrow new Error('Not supported');\n\t\t}\n\t\tlet startOffset = this.getInputStartOffsetOfOutputLineIndex(outputLineIndex);\n\t\tlet endOffset = this.getInputEndOffsetOfOutputLineIndex(model, myLineNumber, outputLineIndex);\n\t\tlet deltaStartIndex = 0;\n\t\tif (outputLineIndex > 0) {\n\t\t\tdeltaStartIndex = this.wrappedIndentLength;\n\t\t}\n\t\treturn FilteredLineTokens.create(model.getLineTokens(myLineNumber, true), startOffset, endOffset, deltaStartIndex);\n\t}\n\n\tpublic getInputColumnOfOutputPosition(outputLineIndex:number, outputColumn:number): number {\n\t\tif (!this._isVisible) {\n\t\t\tthrow new Error('Not supported');\n\t\t}\n\t\tlet adjustedColumn = outputColumn - 1;\n\t\tif (outputLineIndex > 0) {\n\t\t\tif (adjustedColumn < this.wrappedIndentLength) {\n\t\t\t\tadjustedColumn = 0;\n\t\t\t} else {\n\t\t\t\tadjustedColumn -= this.wrappedIndentLength;\n\t\t\t}\n\t\t}\n\t\treturn this.positionMapper.getInputOffsetOfOutputPosition(outputLineIndex, adjustedColumn) + 1;\n\t}\n\n\tpublic getOutputPositionOfInputPosition(deltaLineNumber:number, inputColumn:number): editorCommon.IEditorPosition {\n\t\tif (!this._isVisible) {\n\t\t\tthrow new Error('Not supported');\n\t\t}\n\t\tlet r = this.positionMapper.getOutputPositionOfInputOffset(inputColumn - 1);\n\t\tlet outputLineIndex = r.outputLineIndex;\n\t\tlet outputColumn = r.outputOffset + 1;\n\n\t\tif (outputLineIndex > 0) {\n\t\t\toutputColumn += this.wrappedIndentLength;\n\t\t}\n\n//\t\tconsole.log('in -> out ' + deltaLineNumber + ',' + inputColumn + ' ===> ' + (deltaLineNumber+outputLineIndex) + ',' + outputColumn);\n\t\treturn new Position(deltaLineNumber + outputLineIndex, outputColumn);\n\t}\n}\n\nfunction createSplitLine(linePositionMapperFactory:ILineMapperFactory, text:string, tabSize:number, wrappingColumn:number, columnsForFullWidthChar:number, wrappingIndent:editorCommon.WrappingIndent, isVisible: boolean): ISplitLine {\n\tlet positionMapper = linePositionMapperFactory.createLineMapping(text, tabSize, wrappingColumn, columnsForFullWidthChar, wrappingIndent);\n\tif (positionMapper === null) {\n\t\t// No mapping needed\n\t\treturn new IdentitySplitLine(isVisible);\n\t} else {\n\t\treturn new SplitLine(positionMapper, isVisible);\n\t}\n}\n\nexport class SplitLinesCollection implements ILinesCollection {\n\n\tprivate model: editorCommon.IModel;\n\tprivate _validModelVersionId: number;\n\n\tprivate wrappingColumn:number;\n\tprivate columnsForFullWidthChar:number;\n\tprivate wrappingIndent: editorCommon.WrappingIndent;\n\tprivate tabSize:number;\n\tprivate lines:ISplitLine[];\n\tprivate prefixSumComputer:PrefixSumComputer;\n\tprivate linePositionMapperFactory:ILineMapperFactory;\n\n\tprivate hiddenAreasIds:string[];\n\n\tconstructor(model:editorCommon.IModel, linePositionMapperFactory:ILineMapperFactory, tabSize:number, wrappingColumn:number, columnsForFullWidthChar:number, wrappingIndent:editorCommon.WrappingIndent) {\n\t\tthis.model = model;\n\t\tthis._validModelVersionId = -1;\n\t\tthis.tabSize = tabSize;\n\t\tthis.wrappingColumn = wrappingColumn;\n\t\tthis.columnsForFullWidthChar = columnsForFullWidthChar;\n\t\tthis.wrappingIndent = wrappingIndent;\n\t\tthis.linePositionMapperFactory = linePositionMapperFactory;\n\n\t\tthis._constructLines(true);\n\t}\n\n\tpublic dispose(): void {\n\t\tthis.hiddenAreasIds = this.model.deltaDecorations(this.hiddenAreasIds, []);\n\t}\n\n\tprivate _ensureValidState(): void {\n\t\tlet modelVersion = this.model.getVersionId();\n\t\tif (modelVersion !== this._validModelVersionId) {\n\t\t\tthrow new Error('SplitLinesCollection: attempt to access a \\'newer\\' model');\n\t\t}\n\t}\n\n\tprivate _constructLines(resetHiddenAreas:boolean): void {\n\t\tthis.lines = [];\n\n\t\tif (resetHiddenAreas) {\n\t\t\tthis.hiddenAreasIds = [];\n\t\t}\n\n\t\tlet values:number[] = [];\n\t\tlet linesContent = this.model.getLinesContent();\n\t\tlet lineCount = linesContent.length;\n\n\t\tlet hiddenAreas = this.hiddenAreasIds.map((areaId) => this.model.getDecorationRange(areaId)).sort(Range.compareRangesUsingStarts);\n\t\tlet hiddenAreaStart = 1, hiddenAreaEnd = 0;\n\t\tlet hiddenAreaIdx = -1;\n\t\tlet nextLineNumberToUpdateHiddenArea = (hiddenAreaIdx + 1 < hiddenAreas.length) ? hiddenAreaEnd + 1 : lineCount + 2;\n\n\t\tfor (let i = 0; i < lineCount; i++) {\n\t\t\tlet lineNumber = i + 1;\n\n\t\t\tif (lineNumber === nextLineNumberToUpdateHiddenArea) {\n\t\t\t\thiddenAreaIdx++;\n\t\t\t\thiddenAreaStart = hiddenAreas[hiddenAreaIdx].startLineNumber;\n\t\t\t\thiddenAreaEnd = hiddenAreas[hiddenAreaIdx].endLineNumber;\n\t\t\t\tnextLineNumberToUpdateHiddenArea = (hiddenAreaIdx + 1 < hiddenAreas.length) ? hiddenAreaEnd + 1 : lineCount + 2;\n\t\t\t}\n\n\t\t\tlet isInHiddenArea = (lineNumber >= hiddenAreaStart && lineNumber <= hiddenAreaEnd);\n\t\t\tlet line = createSplitLine(this.linePositionMapperFactory, linesContent[i], this.tabSize, this.wrappingColumn, this.columnsForFullWidthChar, this.wrappingIndent, !isInHiddenArea);\n\t\t\tvalues[i] = line.getOutputLineCount();\n\t\t\tthis.lines[i] = line;\n\t\t}\n\n\t\tthis._validModelVersionId = this.model.getVersionId();\n\n\t\tthis.prefixSumComputer = new PrefixSumComputer(values);\n\t}\n\n\tprivate getHiddenAreas(): editorCommon.IEditorRange[] {\n\t\treturn this.hiddenAreasIds.map((decId) => {\n\t\t\treturn this.model.getDecorationRange(decId);\n\t\t}).sort(Range.compareRangesUsingStarts);\n\t}\n\n\tprivate _reduceRanges(_ranges:editorCommon.IRange[]): editorCommon.IEditorRange[] {\n\t\tif (_ranges.length === 0) {\n\t\t\treturn [];\n\t\t}\n\t\tlet ranges = _ranges.map(r => this.model.validateRange(r)).sort(Range.compareRangesUsingStarts);\n\n\t\tlet result: Range[] = [];\n\t\tlet currentRangeStart = ranges[0].startLineNumber;\n\t\tlet currentRangeEnd = ranges[0].endLineNumber;\n\n\t\tfor (let i = 1, len = ranges.length; i < len; i++) {\n\t\t\tlet range = ranges[i];\n\n\t\t\tif (range.startLineNumber > currentRangeEnd + 1) {\n\t\t\t\tresult.push(new Range(currentRangeStart, 1, currentRangeEnd, 1));\n\t\t\t\tcurrentRangeStart = range.startLineNumber;\n\t\t\t\tcurrentRangeEnd = range.endLineNumber;\n\t\t\t} else if (range.endLineNumber > currentRangeEnd) {\n\t\t\t\tcurrentRangeEnd = range.endLineNumber;\n\t\t\t}\n\t\t}\n\t\tresult.push(new Range(currentRangeStart, 1, currentRangeEnd, 1));\n\t\treturn result;\n\t}\n\n\tpublic setHiddenAreas(_ranges:editorCommon.IRange[], emit:(evenType:string, payload:any)=>void): boolean {\n\n\t\tlet newRanges = this._reduceRanges(_ranges);\n\n\t\t// BEGIN TODO@Martin: Please stop calling this method on each model change!\n\t\tlet oldRanges = this.hiddenAreasIds.map((areaId) => this.model.getDecorationRange(areaId)).sort(Range.compareRangesUsingStarts);\n\n\t\tif (newRanges.length === oldRanges.length) {\n\t\t\tlet hasDifference = false;\n\t\t\tfor (let i = 0; i < newRanges.length; i++) {\n\t\t\t\tif (!newRanges[i].equalsRange(oldRanges[i])) {\n\t\t\t\t\thasDifference = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!hasDifference) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\t// END TODO@Martin: Please stop calling this method on each model change!\n\n\t\tlet newDecorations:editorCommon.IModelDeltaDecoration[] = [];\n\t\tfor (let i = 0; i < newRanges.length; i++) {\n\t\t\tnewDecorations.push({\n\t\t\t\trange: newRanges[i],\n\t\t\t\toptions: {\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tthis.hiddenAreasIds = this.model.deltaDecorations(this.hiddenAreasIds, newDecorations);\n\n\t\tlet hiddenAreas = newRanges;\n\t\tlet hiddenAreaStart = 1, hiddenAreaEnd = 0;\n\t\tlet hiddenAreaIdx = -1;\n\t\tlet nextLineNumberToUpdateHiddenArea = (hiddenAreaIdx + 1 < hiddenAreas.length) ? hiddenAreaEnd + 1 : this.lines.length + 2;\n\n\t\tfor (let i = 0; i < this.lines.length; i++) {\n\t\t\tlet lineNumber = i + 1;\n\n\t\t\tif (lineNumber === nextLineNumberToUpdateHiddenArea) {\n\t\t\t\thiddenAreaIdx++;\n\t\t\t\thiddenAreaStart = hiddenAreas[hiddenAreaIdx].startLineNumber;\n\t\t\t\thiddenAreaEnd = hiddenAreas[hiddenAreaIdx].endLineNumber;\n\t\t\t\tnextLineNumberToUpdateHiddenArea = (hiddenAreaIdx + 1 < hiddenAreas.length) ? hiddenAreaEnd + 1 : this.lines.length + 2;\n\t\t\t}\n\n\t\t\tlet lineChanged = false;\n\t\t\tif (lineNumber >= hiddenAreaStart && lineNumber <= hiddenAreaEnd) {\n\t\t\t\t// Line should be hidden\n\t\t\t\tif (this.lines[i].isVisible()) {\n\t\t\t\t\tthis.lines[i].setVisible(false);\n\t\t\t\t\tlineChanged = true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Line should be visible\n\t\t\t\tif (!this.lines[i].isVisible()) {\n\t\t\t\t\tthis.lines[i].setVisible(true);\n\t\t\t\t\tlineChanged = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (lineChanged) {\n\t\t\t\tlet newOutputLineCount = this.lines[i].getOutputLineCount();\n\t\t\t\tthis.prefixSumComputer.changeValue(i, newOutputLineCount);\n\t\t\t}\n\t\t}\n\n\t\temit(editorCommon.ViewEventNames.ModelFlushedEvent, null);\n\t\treturn true;\n\t}\n\n\tpublic inputPositionIsVisible(inputLineNumber:number, inputColumn:number): boolean {\n\t\tif (inputLineNumber < 1 || inputLineNumber > this.lines.length) {\n\t\t\t// invalid arguments\n\t\t\treturn false;\n\t\t}\n\t\treturn this.lines[inputLineNumber - 1].isVisible();\n\t}\n\n\tpublic setTabSize(newTabSize:number, emit:(evenType:string, payload:any)=>void): boolean {\n\t\tif (this.tabSize === newTabSize) {\n\t\t\treturn false;\n\t\t}\n\t\tthis.tabSize = newTabSize;\n\n\t\tthis._constructLines(false);\n\t\temit(editorCommon.ViewEventNames.ModelFlushedEvent, null);\n\n\t\treturn true;\n\t}\n\n\tpublic setWrappingIndent(newWrappingIndent:editorCommon.WrappingIndent, emit:(evenType:string, payload:any)=>void): boolean {\n\t\tif (this.wrappingIndent === newWrappingIndent) {\n\t\t\treturn false;\n\t\t}\n\t\tthis.wrappingIndent = newWrappingIndent;\n\n\t\tthis._constructLines(false);\n\t\temit(editorCommon.ViewEventNames.ModelFlushedEvent, null);\n\n\t\treturn true;\n\t}\n\n\tpublic setWrappingColumn(newWrappingColumn:number, columnsForFullWidthChar:number, emit:(evenType:string, payload:any)=>void): boolean {\n\t\tif (this.wrappingColumn === newWrappingColumn && this.columnsForFullWidthChar === columnsForFullWidthChar) {\n\t\t\treturn false;\n\t\t}\n\t\tthis.wrappingColumn = newWrappingColumn;\n\t\tthis.columnsForFullWidthChar = columnsForFullWidthChar;\n\t\tthis._constructLines(false);\n\t\temit(editorCommon.ViewEventNames.ModelFlushedEvent, null);\n\n\t\treturn true;\n\t}\n\n\tpublic onModelFlushed(versionId:number, emit:(evenType:string, payload:any)=>void): void {\n\t\tthis._constructLines(true);\n\t\temit(editorCommon.ViewEventNames.ModelFlushedEvent, null);\n\t}\n\n\tpublic onModelLinesDeleted(versionId: number, fromLineNumber: number, toLineNumber: number, emit: (evenType: string, payload: any) => void): void {\n\t\tif (versionId <= this._validModelVersionId) {\n\t\t\treturn;\n\t\t}\n\t\tthis._validModelVersionId = versionId;\n\n\t\tlet outputFromLineNumber = (fromLineNumber === 1 ? 1 : this.prefixSumComputer.getAccumulatedValue(fromLineNumber - 2) + 1);\n\t\tlet outputToLineNumber = this.prefixSumComputer.getAccumulatedValue(toLineNumber - 1);\n\n\t\tthis.lines.splice(fromLineNumber - 1, toLineNumber - fromLineNumber + 1);\n\t\tthis.prefixSumComputer.removeValues(fromLineNumber - 1, toLineNumber - fromLineNumber + 1);\n\n\t\tlet e:editorCommon.IViewLinesDeletedEvent = {\n\t\t\tfromLineNumber: outputFromLineNumber,\n\t\t\ttoLineNumber: outputToLineNumber\n\t\t};\n\t\temit(editorCommon.ViewEventNames.LinesDeletedEvent, e);\n\t}\n\n\tpublic onModelLinesInserted(versionId:number, fromLineNumber:number, toLineNumber:number, text:string[], emit:(evenType:string, payload:any)=>void): void {\n\t\tif (versionId <= this._validModelVersionId) {\n\t\t\treturn;\n\t\t}\n\t\tthis._validModelVersionId = versionId;\n\n\t\tlet hiddenAreas = this.getHiddenAreas();\n\t\tlet isInHiddenArea = false;\n\t\tlet testPosition = new Position(fromLineNumber, 1);\n\t\tfor (let i = 0; i < hiddenAreas.length; i++) {\n\t\t\tif (hiddenAreas[i].containsPosition(testPosition)) {\n\t\t\t\tisInHiddenArea = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tlet outputFromLineNumber = (fromLineNumber === 1 ? 1 : this.prefixSumComputer.getAccumulatedValue(fromLineNumber - 2) + 1);\n\n\t\tlet totalOutputLineCount = 0;\n\t\tlet insertLines: ISplitLine[] = [];\n\t\tlet insertPrefixSumValues: number[] = [];\n\n\t\tfor (let i = 0, len = text.length; i < len; i++) {\n\t\t\tlet line = createSplitLine(this.linePositionMapperFactory, text[i], this.tabSize, this.wrappingColumn, this.columnsForFullWidthChar, this.wrappingIndent, !isInHiddenArea);\n\t\t\tinsertLines.push(line);\n\n\t\t\tlet outputLineCount = line.getOutputLineCount();\n\t\t\ttotalOutputLineCount += outputLineCount;\n\t\t\tinsertPrefixSumValues.push(outputLineCount);\n\t\t}\n\n\t\tthis.lines = this.lines.slice(0, fromLineNumber - 1).concat(insertLines).concat(this.lines.slice(fromLineNumber - 1));\n\n\t\tthis.prefixSumComputer.insertValues(fromLineNumber - 1, insertPrefixSumValues);\n\n\t\tlet e:editorCommon.IViewLinesInsertedEvent = {\n\t\t\tfromLineNumber: outputFromLineNumber,\n\t\t\ttoLineNumber: outputFromLineNumber + totalOutputLineCount - 1\n\t\t};\n\t\temit(editorCommon.ViewEventNames.LinesInsertedEvent, e);\n\t}\n\n\tpublic onModelLineChanged(versionId:number, lineNumber:number, newText:string, emit:(evenType:string, payload:any)=>void): boolean {\n\t\tif (versionId <= this._validModelVersionId) {\n\t\t\treturn;\n\t\t}\n\t\tthis._validModelVersionId = versionId;\n\t\tlet lineIndex = lineNumber - 1;\n\n\t\tlet oldOutputLineCount = this.lines[lineIndex].getOutputLineCount();\n\t\tlet isVisible = this.lines[lineIndex].isVisible();\n\t\tlet line = createSplitLine(this.linePositionMapperFactory, newText, this.tabSize, this.wrappingColumn, this.columnsForFullWidthChar, this.wrappingIndent, isVisible);\n\t\tthis.lines[lineIndex] = line;\n\t\tlet newOutputLineCount = this.lines[lineIndex].getOutputLineCount();\n\n\t\tlet lineMappingChanged = false;\n\t\tlet changeFrom = 0;\n\t\tlet changeTo = -1;\n\t\tlet insertFrom = 0;\n\t\tlet insertTo = -1;\n\t\tlet deleteFrom = 0;\n\t\tlet deleteTo = -1;\n\n\t\tif (oldOutputLineCount > newOutputLineCount) {\n\t\t\tchangeFrom = (lineNumber === 1 ? 1 : this.prefixSumComputer.getAccumulatedValue(lineNumber - 2) + 1);\n\t\t\tchangeTo = changeFrom + newOutputLineCount - 1;\n\t\t\tdeleteFrom = changeTo + 1;\n\t\t\tdeleteTo = deleteFrom + (oldOutputLineCount - newOutputLineCount) - 1;\n\t\t\tlineMappingChanged = true;\n\t\t} else if (oldOutputLineCount < newOutputLineCount) {\n\t\t\tchangeFrom = (lineNumber === 1 ? 1 : this.prefixSumComputer.getAccumulatedValue(lineNumber - 2) + 1);\n\t\t\tchangeTo = changeFrom + oldOutputLineCount - 1;\n\t\t\tinsertFrom = changeTo + 1;\n\t\t\tinsertTo = insertFrom + (newOutputLineCount - oldOutputLineCount) - 1;\n\t\t\tlineMappingChanged = true;\n\t\t} else {\n\t\t\tchangeFrom = (lineNumber === 1 ? 1 : this.prefixSumComputer.getAccumulatedValue(lineNumber - 2) + 1);\n\t\t\tchangeTo = changeFrom + newOutputLineCount - 1;\n\t\t}\n\n\t\tthis.prefixSumComputer.changeValue(lineIndex, newOutputLineCount);\n\n\t\tlet e1:editorCommon.IViewLineChangedEvent;\n\t\tlet e2:editorCommon.IViewLinesInsertedEvent;\n\t\tlet e3:editorCommon.IViewLinesDeletedEvent;\n\n\t\tif (changeFrom <= changeTo) {\n\t\t\tfor (let i = changeFrom; i <= changeTo; i++) {\n\t\t\t\te1 = {\n\t\t\t\t\tlineNumber: i\n\t\t\t\t};\n\t\t\t\temit(editorCommon.ViewEventNames.LineChangedEvent, e1);\n\t\t\t}\n\t\t}\n\t\tif (insertFrom <= insertTo) {\n\t\t\te2 = {\n\t\t\t\tfromLineNumber: insertFrom,\n\t\t\t\ttoLineNumber: insertTo\n\t\t\t};\n\t\t\temit(editorCommon.ViewEventNames.LinesInsertedEvent, e2);\n\t\t}\n\t\tif (deleteFrom <= deleteTo) {\n\t\t\te3 = {\n\t\t\t\tfromLineNumber: deleteFrom,\n\t\t\t\ttoLineNumber: deleteTo\n\t\t\t};\n\t\t\temit(editorCommon.ViewEventNames.LinesDeletedEvent, e3);\n\t\t}\n\n\t\treturn lineMappingChanged;\n\t}\n\n\tpublic getOutputLineCount(): number {\n\t\tthis._ensureValidState();\n\t\treturn this.prefixSumComputer.getTotalValue();\n\t}\n\n\tprivate _toValidOutputLineNumber(outputLineNumber: number): number {\n\t\tif (outputLineNumber < 1) {\n\t\t\treturn 1;\n\t\t}\n\t\tlet outputLineCount = this.getOutputLineCount();\n\t\tif (outputLineNumber > outputLineCount) {\n\t\t\treturn outputLineCount;\n\t\t}\n\t\treturn outputLineNumber;\n\t}\n\n\tpublic getOutputLineContent(outputLineNumber: number): string {\n\t\tthis._ensureValidState();\n\t\toutputLineNumber = this._toValidOutputLineNumber(outputLineNumber);\n\t\tlet r = this.prefixSumComputer.getIndexOf(outputLineNumber - 1);\n\t\tlet lineIndex = r.index;\n\t\tlet remainder = r.remainder;\n\n\t\treturn this.lines[lineIndex].getOutputLineContent(this.model, lineIndex + 1, remainder);\n\t}\n\n\tpublic getOutputLineMinColumn(outputLineNumber:number): number {\n\t\tthis._ensureValidState();\n\t\toutputLineNumber = this._toValidOutputLineNumber(outputLineNumber);\n\t\tlet r = this.prefixSumComputer.getIndexOf(outputLineNumber - 1);\n\t\tlet lineIndex = r.index;\n\t\tlet remainder = r.remainder;\n\n\t\treturn this.lines[lineIndex].getOutputLineMinColumn(this.model, lineIndex + 1, remainder);\n\t}\n\n\tpublic getOutputLineMaxColumn(outputLineNumber: number): number {\n\t\tthis._ensureValidState();\n\t\toutputLineNumber = this._toValidOutputLineNumber(outputLineNumber);\n\t\tlet r = this.prefixSumComputer.getIndexOf(outputLineNumber - 1);\n\t\tlet lineIndex = r.index;\n\t\tlet remainder = r.remainder;\n\n\t\treturn this.lines[lineIndex].getOutputLineMaxColumn(this.model, lineIndex + 1, remainder);\n\t}\n\n\tpublic getOutputLineTokens(outputLineNumber: number): editorCommon.ViewLineTokens {\n\t\tthis._ensureValidState();\n\t\toutputLineNumber = this._toValidOutputLineNumber(outputLineNumber);\n\t\tlet r = this.prefixSumComputer.getIndexOf(outputLineNumber - 1);\n\t\tlet lineIndex = r.index;\n\t\tlet remainder = r.remainder;\n\n\t\treturn this.lines[lineIndex].getOutputLineTokens(this.model, lineIndex + 1, remainder);\n\t}\n\n\tpublic convertOutputPositionToInputPosition(viewLineNumber: number, viewColumn: number): editorCommon.IEditorPosition {\n\t\tthis._ensureValidState();\n\t\tviewLineNumber = this._toValidOutputLineNumber(viewLineNumber);\n\n\t\tlet r = this.prefixSumComputer.getIndexOf(viewLineNumber - 1);\n\t\tlet lineIndex = r.index;\n\t\tlet remainder = r.remainder;\n\n\t\tlet inputColumn = this.lines[lineIndex].getInputColumnOfOutputPosition(remainder, viewColumn);\n\t\t// console.log('out -> in ' + viewLineNumber + ',' + viewColumn + ' ===> ' + (lineIndex+1) + ',' + inputColumn);\n\t\treturn this.model.validatePosition(new Position(lineIndex+1, inputColumn));\n\t}\n\n\tpublic convertInputPositionToOutputPosition(_inputLineNumber: number, _inputColumn: number): editorCommon.IEditorPosition {\n\t\tthis._ensureValidState();\n\n\t\tlet validPosition = this.model.validatePosition(new Position(_inputLineNumber, _inputColumn));\n\t\tlet inputLineNumber = validPosition.lineNumber;\n\t\tlet inputColumn = validPosition.column;\n\n\t\tlet lineIndex = inputLineNumber - 1, lineIndexChanged = false;\n\t\twhile (lineIndex > 0 && !this.lines[lineIndex].isVisible()) {\n\t\t\tlineIndex--;\n\t\t\tlineIndexChanged = true;\n\t\t}\n\t\tif (lineIndex === 0 && !this.lines[lineIndex].isVisible()) {\n\t\t\t// Could not reach a real line\n\t\t\t// console.log('in -> out ' + inputLineNumber + ',' + inputColumn + ' ===> ' + 1 + ',' + 1);\n\t\t\treturn new Position(1, 1);\n\t\t}\n\t\tlet deltaLineNumber = 1 + (lineIndex === 0 ? 0 : this.prefixSumComputer.getAccumulatedValue(lineIndex - 1));\n\n\t\tlet r:editorCommon.IEditorPosition;\n\t\tif (lineIndexChanged) {\n\t\t\tr =  this.lines[lineIndex].getOutputPositionOfInputPosition(deltaLineNumber, this.model.getLineMaxColumn(lineIndex + 1));\n\t\t} else {\n\t\t\tr = this.lines[inputLineNumber - 1].getOutputPositionOfInputPosition(deltaLineNumber, inputColumn);\n\t\t}\n\n\t\t// console.log('in -> out ' + inputLineNumber + ',' + inputColumn + ' ===> ' + r.lineNumber + ',' + r);\n\t\treturn r;\n\t}\n}"]}