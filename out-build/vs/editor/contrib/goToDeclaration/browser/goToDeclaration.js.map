{"version":3,"sources":["vs/editor/contrib/goToDeclaration/browser/goToDeclaration.ts"],"names":[],"mappings":"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","file":"vs/editor/contrib/goToDeclaration/browser/goToDeclaration.js","sourceRoot":"file:///Users/darrin/src/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n'use strict';\n\nimport 'vs/css!./goToDeclaration';\nimport * as nls from 'vs/nls';\nimport {coalesce} from 'vs/base/common/arrays';\nimport {Throttler} from 'vs/base/common/async';\nimport {onUnexpectedError} from 'vs/base/common/errors';\nimport {ListenerUnbind} from 'vs/base/common/eventEmitter';\nimport {IHTMLContentElement} from 'vs/base/common/htmlContent';\nimport {KeyCode, KeyMod} from 'vs/base/common/keyCodes';\nimport * as platform from 'vs/base/common/platform';\nimport Severity from 'vs/base/common/severity';\nimport * as strings from 'vs/base/common/strings';\nimport URI from 'vs/base/common/uri';\nimport {TPromise} from 'vs/base/common/winjs.base';\nimport * as browser from 'vs/base/browser/browser';\nimport {IKeyboardEvent} from 'vs/base/browser/keyboardEvent';\nimport {IEditorService} from 'vs/platform/editor/common/editor';\nimport {IMessageService} from 'vs/platform/message/common/message';\nimport {IRequestService} from 'vs/platform/request/common/request';\nimport {Range} from 'vs/editor/common/core/range';\nimport {EditorAction} from 'vs/editor/common/editorAction';\nimport {Behaviour} from 'vs/editor/common/editorActionEnablement';\nimport * as editorCommon from 'vs/editor/common/editorCommon';\nimport {CommonEditorRegistry, ContextKey, EditorActionDescriptor} from 'vs/editor/common/editorCommonExtensions';\nimport {IReference, DeclarationRegistry} from 'vs/editor/common/modes';\nimport {tokenizeToHtmlContent} from 'vs/editor/common/modes/textToHtmlTokenizer';\nimport {ICodeEditor, IEditorMouseEvent, IMouseTarget} from 'vs/editor/browser/editorBrowser';\nimport {EditorBrowserRegistry} from 'vs/editor/browser/editorBrowserExtensions';\nimport {getDeclarationsAtPosition} from 'vs/editor/contrib/goToDeclaration/common/goToDeclaration';\nimport {FindReferencesController} from 'vs/editor/contrib/referenceSearch/browser/referenceSearch';\n\nconst DEFAULT_BEHAVIOR = Behaviour.WidgetFocus | Behaviour.ShowInContextMenu | Behaviour.UpdateOnCursorPositionChange;\n\nfunction metaTitle(references: IReference[]): string {\n\tif (references.length > 1) {\n\t\treturn nls.localize('meta.title', \" â€“ {0} definitions\", references.length);\n\t}\n}\n\nexport abstract class GoToTypeAction extends EditorAction {\n\n\tconstructor(\n\t\tdescriptor: editorCommon.IEditorActionDescriptorData,\n\t\teditor: editorCommon.ICommonCodeEditor,\n\t\tprivate _messageService: IMessageService,\n\t\tprivate _editorService: IEditorService,\n\t\tcondition = DEFAULT_BEHAVIOR\n\t) {\n\t\tsuper(descriptor, editor, condition);\n\t}\n\n\tpublic run(): TPromise<any> {\n\t\tlet model = this.editor.getModel();\n\t\tlet position = this.editor.getPosition();\n\t\tlet promise = this._resolve(model.getAssociatedResource(), { lineNumber: position.lineNumber, column: position.column });\n\n\t\treturn promise.then(references => {\n\n\t\t\t// remove falsy entries\n\t\t\treferences = coalesce(references);\n\t\t\tif (!references || references.length === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// only use the start position\n\t\t\treferences = references.map(reference => {\n\t\t\t\treturn {\n\t\t\t\t\tresource: reference.resource,\n\t\t\t\t\trange: Range.collapseToStart(reference.range)\n\t\t\t\t};\n\t\t\t});\n\n\t\t\t// open and reveal\n\t\t\tif (references.length === 1 && !this._showSingleReferenceInPeek()) {\n\t\t\t\treturn this._editorService.openEditor({\n\t\t\t\t\tresource: references[0].resource,\n\t\t\t\t\toptions: { selection: references[0].range }\n\t\t\t\t}, this.openToTheSide);\n\n\t\t\t} else {\n\t\t\t\tlet controller = FindReferencesController.getController(this.editor);\n\t\t\t\treturn controller.processRequest(this.editor.getSelection(), TPromise.as(references), metaTitle);\n\t\t\t}\n\n\t\t}, (err) => {\n\t\t\t// report an error\n\t\t\tthis._messageService.show(Severity.Error, err);\n\t\t\treturn false;\n\t\t});\n\t}\n\n\tprotected get openToTheSide(): boolean {\n\t\treturn false;\n\t}\n\n\tprotected abstract _resolve(resource: URI, position: editorCommon.IPosition): TPromise<IReference[]>;\n\n\tprotected _showSingleReferenceInPeek() {\n\t\treturn false;\n\t}\n}\n\nexport class GoToTypeDeclarationActions extends GoToTypeAction {\n\n\tpublic static ID = 'editor.action.goToTypeDeclaration';\n\n\tconstructor(\n\t\tdescriptor: editorCommon.IEditorActionDescriptorData,\n\t\teditor: editorCommon.ICommonCodeEditor,\n\t\t@IMessageService messageService: IMessageService,\n\t\t@IEditorService editorService: IEditorService\n\t) {\n\t\tsuper(descriptor, editor, messageService, editorService);\n\t}\n\n\tpublic getGroupId(): string {\n\t\treturn '1_goto/3_visitTypeDefinition';\n\t}\n\n\tpublic isSupported(): boolean {\n\t\treturn !!this.editor.getModel().getMode().typeDeclarationSupport && super.isSupported();\n\t}\n\n\tpublic getEnablementState(): boolean {\n\t\tif (!super.getEnablementState()) {\n\t\t\treturn false;\n\t\t}\n\n\t\tlet model = this.editor.getModel(),\n\t\t\tposition = this.editor.getSelection().getStartPosition();\n\n\t\treturn model.getMode().typeDeclarationSupport.canFindTypeDeclaration(\n\t\t\tmodel.getLineContext(position.lineNumber),\n\t\t\tposition.column - 1\n\t\t);\n\t}\n\n\tprotected _resolve(resource: URI, position: editorCommon.IPosition): TPromise<IReference[]> {\n\t\tlet typeDeclarationSupport = this.editor.getModel().getMode().typeDeclarationSupport;\n\t\tif (typeDeclarationSupport) {\n\t\t\treturn typeDeclarationSupport.findTypeDeclaration(<any>resource, position).then(value => [value]);\n\t\t}\n\t}\n}\n\nexport abstract class BaseGoToDeclarationAction extends GoToTypeAction {\n\n\tconstructor(\n\t\tdescriptor: editorCommon.IEditorActionDescriptorData,\n\t\teditor: editorCommon.ICommonCodeEditor,\n\t\tmessageService: IMessageService,\n\t\teditorService: IEditorService,\n\t\tcondition: Behaviour\n\t) {\n\t\tsuper(descriptor, editor, messageService, editorService, condition);\n\t}\n\n\tpublic getGroupId(): string {\n\t\treturn '1_goto/2_visitDefinition';\n\t}\n\n\tpublic isSupported(): boolean {\n\t\treturn DeclarationRegistry.has(this.editor.getModel()) && super.isSupported();\n\t}\n\n\tpublic getEnablementState(): boolean {\n\t\tif (!super.getEnablementState()) {\n\t\t\treturn false;\n\t\t}\n\n\t\tlet model = this.editor.getModel(),\n\t\t\tposition = this.editor.getSelection().getStartPosition();\n\n\t\treturn DeclarationRegistry.all(model).some(provider => {\n\t\t\treturn provider.canFindDeclaration(\n\t\t\t\tmodel.getLineContext(position.lineNumber),\n\t\t\t\tposition.column - 1);\n\t\t});\n\t}\n\n\n\tprotected _resolve(resource: URI, position: editorCommon.IPosition): TPromise<IReference[]> {\n\t\treturn getDeclarationsAtPosition(this.editor.getModel(), this.editor.getPosition());\n\t}\n}\n\nexport class GoToDeclarationAction extends BaseGoToDeclarationAction {\n\n\tpublic static ID = 'editor.action.goToDeclaration';\n\n\tconstructor(\n\t\tdescriptor: editorCommon.IEditorActionDescriptorData,\n\t\teditor: editorCommon.ICommonCodeEditor,\n\t\t@IMessageService messageService: IMessageService,\n\t\t@IEditorService editorService: IEditorService\n\t) {\n\t\tsuper(descriptor, editor, messageService, editorService, DEFAULT_BEHAVIOR);\n\t}\n}\n\nexport class OpenDeclarationToTheSideAction extends BaseGoToDeclarationAction {\n\n\tpublic static ID = 'editor.action.openDeclarationToTheSide';\n\n\tconstructor(\n\t\tdescriptor: editorCommon.IEditorActionDescriptorData,\n\t\teditor: editorCommon.ICommonCodeEditor,\n\t\t@IMessageService messageService: IMessageService,\n\t\t@IEditorService editorService: IEditorService\n\t) {\n\t\tsuper(descriptor, editor, messageService, editorService, Behaviour.WidgetFocus | Behaviour.UpdateOnCursorPositionChange);\n\t}\n\n\tprotected get openToTheSide(): boolean {\n\t\treturn true;\n\t}\n}\n\nexport class PreviewDeclarationAction extends BaseGoToDeclarationAction {\n\n\tpublic static ID = 'editor.action.previewDeclaration';\n\n\tconstructor(\n\t\tdescriptor: editorCommon.IEditorActionDescriptorData,\n\t\teditor: editorCommon.ICommonCodeEditor,\n\t\t@IMessageService messageService: IMessageService,\n\t\t@IEditorService editorService: IEditorService\n\t) {\n\t\tsuper(descriptor, editor, messageService, editorService, DEFAULT_BEHAVIOR);\n\t}\n\n\tprotected _showSingleReferenceInPeek() {\n\t\treturn true;\n\t}\n}\n\n// --- Editor Contribution to goto definition using the mouse and a modifier key\n\nclass GotoDefinitionWithMouseEditorContribution implements editorCommon.IEditorContribution {\n\n\tstatic ID = 'editor.contrib.gotodefinitionwithmouse';\n\tstatic TRIGGER_MODIFIER = platform.isMacintosh ? 'metaKey' : 'ctrlKey';\n\tstatic TRIGGER_SIDEBYSIDE_KEY_VALUE = KeyCode.Alt;\n\tstatic TRIGGER_KEY_VALUE = platform.isMacintosh ? KeyCode.Meta : KeyCode.Ctrl;\n\tstatic MAX_SOURCE_PREVIEW_LINES = 7;\n\n\tprivate editor: ICodeEditor;\n\tprivate toUnhook: ListenerUnbind[];\n\tprivate hasRequiredServices: boolean;\n\tprivate decorations: string[];\n\tprivate currentWordUnderMouse: editorCommon.IWordAtPosition;\n\tprivate throttler: Throttler;\n\tprivate lastMouseMoveEvent: IEditorMouseEvent;\n\tprivate hasTriggerKeyOnMouseDown: boolean;\n\n\tconstructor(\n\t\teditor: ICodeEditor,\n\t\t@IRequestService private requestService: IRequestService,\n\t\t@IMessageService private messageService: IMessageService,\n\t\t@IEditorService private editorService: IEditorService\n\t) {\n\t\tthis.hasRequiredServices = !!this.messageService && !!this.requestService && !!this.editorService;\n\n\t\tthis.toUnhook = [];\n\t\tthis.decorations = [];\n\t\tthis.editor = editor;\n\t\tthis.throttler = new Throttler();\n\n\t\tthis.toUnhook.push(this.editor.addListener(editorCommon.EventType.MouseDown, (e: IEditorMouseEvent) => this.onEditorMouseDown(e)));\n\t\tthis.toUnhook.push(this.editor.addListener(editorCommon.EventType.MouseUp, (e: IEditorMouseEvent) => this.onEditorMouseUp(e)));\n\t\tthis.toUnhook.push(this.editor.addListener(editorCommon.EventType.MouseMove, (e: IEditorMouseEvent) => this.onEditorMouseMove(e)));\n\t\tthis.toUnhook.push(this.editor.addListener(editorCommon.EventType.KeyDown, (e: IKeyboardEvent) => this.onEditorKeyDown(e)));\n\t\tthis.toUnhook.push(this.editor.addListener(editorCommon.EventType.KeyUp, (e: IKeyboardEvent) => this.onEditorKeyUp(e)));\n\n\t\tthis.toUnhook.push(this.editor.addListener(editorCommon.EventType.ModelChanged, (e: editorCommon.IModelContentChangedEvent) => this.resetHandler()));\n\t\tthis.toUnhook.push(this.editor.addListener('change', (e: editorCommon.IModelContentChangedEvent) => this.resetHandler()));\n\t\tthis.toUnhook.push(this.editor.addListener('scroll', () => this.resetHandler()));\n\t}\n\n\tprivate onEditorMouseMove(mouseEvent: IEditorMouseEvent, withKey?: IKeyboardEvent): void {\n\t\tthis.lastMouseMoveEvent = mouseEvent;\n\n\t\tthis.startFindDefinition(mouseEvent, withKey);\n\t}\n\n\tprivate startFindDefinition(mouseEvent: IEditorMouseEvent, withKey?: IKeyboardEvent): void {\n\t\tif (!this.isEnabled(mouseEvent, withKey)) {\n\t\t\tthis.currentWordUnderMouse = null;\n\t\t\tthis.removeDecorations();\n\t\t\treturn;\n\t\t}\n\n\t\t// Find word at mouse position\n\t\tlet position = mouseEvent.target.position;\n\t\tlet word = position ? this.editor.getModel().getWordAtPosition(position) : null;\n\t\tif (!word) {\n\t\t\tthis.currentWordUnderMouse = null;\n\t\t\tthis.removeDecorations();\n\t\t\treturn;\n\t\t}\n\n\t\t// Return early if word at position is still the same\n\t\tif (this.currentWordUnderMouse && this.currentWordUnderMouse.startColumn === word.startColumn && this.currentWordUnderMouse.endColumn === word.endColumn && this.currentWordUnderMouse.word === word.word) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.currentWordUnderMouse = word;\n\n\t\t// Find definition and decorate word if found\n\t\tlet state = this.editor.captureState(editorCommon.CodeEditorStateFlag.Position, editorCommon.CodeEditorStateFlag.Value, editorCommon.CodeEditorStateFlag.Selection, editorCommon.CodeEditorStateFlag.Scroll);\n\t\tthis.throttler.queue(() => {\n\t\t\treturn state.validate(this.editor)\n\t\t\t\t? this.findDefinition(mouseEvent.target)\n\t\t\t\t: TPromise.as(null);\n\n\t\t}).then(results => {\n\t\t\tif (!results || !results.length || !state.validate(this.editor)) {\n\t\t\t\tthis.removeDecorations();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Multiple results\n\t\t\tif (results.length > 1) {\n\t\t\t\tthis.addDecoration({\n\t\t\t\t\tstartLineNumber: position.lineNumber,\n\t\t\t\t\tstartColumn: word.startColumn,\n\t\t\t\t\tendLineNumber: position.lineNumber,\n\t\t\t\t\tendColumn: word.endColumn\n\t\t\t\t}, nls.localize('multipleResults', \"Click to show the {0} definitions found.\", results.length), false);\n\t\t\t}\n\n\t\t\t// Single result\n\t\t\telse {\n\t\t\t\tlet result = results[0];\n\t\t\t\tthis.editorService.resolveEditorModel({ resource: result.resource }).then(model => {\n\t\t\t\t\tlet source: string;\n\t\t\t\t\tif (model && model.textEditorModel) {\n\n\t\t\t\t\t\tlet from = Math.max(1, result.range.startLineNumber),\n\t\t\t\t\t\t\tto: number,\n\t\t\t\t\t\t\teditorModel: editorCommon.IModel;\n\n\t\t\t\t\t\teditorModel = <editorCommon.IModel>model.textEditorModel;\n\n\t\t\t\t\t\t// if we have a range, take that into consideration for the \"to\" position, otherwise fallback to MAX_SOURCE_PREVIEW_LINES\n\t\t\t\t\t\tif (result.range.startLineNumber !== result.range.endLineNumber || result.range.startColumn !== result.range.endColumn) {\n\t\t\t\t\t\t\tto = Math.min(result.range.endLineNumber, result.range.startLineNumber + GotoDefinitionWithMouseEditorContribution.MAX_SOURCE_PREVIEW_LINES, editorModel.getLineCount());\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tto = Math.min(from + GotoDefinitionWithMouseEditorContribution.MAX_SOURCE_PREVIEW_LINES, editorModel.getLineCount());\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tsource = editorModel.getValueInRange({\n\t\t\t\t\t\t\tstartLineNumber: from,\n\t\t\t\t\t\t\tstartColumn: 1,\n\t\t\t\t\t\t\tendLineNumber: to,\n\t\t\t\t\t\t\tendColumn: editorModel.getLineMaxColumn(to)\n\t\t\t\t\t\t}).trim();\n\n\t\t\t\t\t\t// remove common leading whitespace\n\t\t\t\t\t\tlet min = Number.MAX_VALUE,\n\t\t\t\t\t\t\tregexp = /^[ \\t]*/,\n\t\t\t\t\t\t\tmatch: RegExpExecArray,\n\t\t\t\t\t\t\tcontents: string;\n\n\t\t\t\t\t\twhile (from <= to && min > 0) {\n\t\t\t\t\t\t\tcontents = editorModel.getLineContent(from++);\n\t\t\t\t\t\t\tif (contents.trim().length === 0) {\n\t\t\t\t\t\t\t\t// empty or whitespace only\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tmatch = regexp.exec(contents);\n\t\t\t\t\t\t\tmin = Math.min(min, match[0].length);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tsource = source.replace(new RegExp(`^([ \\\\t]{${min}})`, 'gm'), strings.empty);\n\n\t\t\t\t\t\tif (result.range.endLineNumber - result.range.startLineNumber > GotoDefinitionWithMouseEditorContribution.MAX_SOURCE_PREVIEW_LINES) {\n\t\t\t\t\t\t\tsource += '\\n\\u2026';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.addDecoration({\n\t\t\t\t\t\tstartLineNumber: position.lineNumber,\n\t\t\t\t\t\tstartColumn: word.startColumn,\n\t\t\t\t\t\tendLineNumber: position.lineNumber,\n\t\t\t\t\t\tendColumn: word.endColumn\n\t\t\t\t\t}, source, true);\n\t\t\t\t});\n\t\t\t}\n\t\t}).done(undefined, onUnexpectedError);\n\t}\n\n\tprivate addDecoration(range: editorCommon.IRange, text: string, isCode: boolean): void {\n\t\tlet model = this.editor.getModel();\n\t\tif (!model) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet htmlMessage: IHTMLContentElement = {\n\t\t\ttagName: 'div',\n\t\t\tclassName: 'goto-definition-link-hover',\n\t\t\tstyle: `tab-size: ${model.getOptions().tabSize}`\n\t\t};\n\n\t\tif (text && text.trim().length > 0) {\n\t\t\t// not whitespace only\n\t\t\thtmlMessage.children = [isCode ? tokenizeToHtmlContent(text, model.getMode()) : { tagName: 'span', text }];\n\t\t}\n\n\t\tlet newDecorations = {\n\t\t\trange: range,\n\t\t\toptions: {\n\t\t\t\tinlineClassName: 'goto-definition-link',\n\t\t\t\thtmlMessage: [htmlMessage]\n\t\t\t}\n\t\t};\n\n\t\tthis.decorations = this.editor.deltaDecorations(this.decorations, [newDecorations]);\n\t}\n\n\tprivate removeDecorations(): void {\n\t\tif (this.decorations.length > 0) {\n\t\t\tthis.decorations = this.editor.deltaDecorations(this.decorations, []);\n\t\t}\n\t}\n\n\tprivate onEditorKeyDown(e: IKeyboardEvent): void {\n\t\tif (\n\t\t\tthis.lastMouseMoveEvent && (\n\t\t\t\te.keyCode === GotoDefinitionWithMouseEditorContribution.TRIGGER_KEY_VALUE || // User just pressed Ctrl/Cmd (normal goto definition)\n\t\t\t\te.keyCode === GotoDefinitionWithMouseEditorContribution.TRIGGER_SIDEBYSIDE_KEY_VALUE && e[GotoDefinitionWithMouseEditorContribution.TRIGGER_MODIFIER] // User pressed Ctrl/Cmd+Alt (goto definition to the side)\n\t\t\t)\n\t\t) {\n\t\t\tthis.startFindDefinition(this.lastMouseMoveEvent, e);\n\t\t} else if (e[GotoDefinitionWithMouseEditorContribution.TRIGGER_MODIFIER]) {\n\t\t\tthis.removeDecorations(); // remove decorations if user holds another key with ctrl/cmd to prevent accident goto declaration\n\t\t}\n\t}\n\n\tprivate resetHandler(): void {\n\t\tthis.lastMouseMoveEvent = null;\n\t\tthis.removeDecorations();\n\t}\n\n\tprivate onEditorMouseDown(mouseEvent: IEditorMouseEvent): void {\n\t\t// We need to record if we had the trigger key on mouse down because someone might select something in the editor\n\t\t// holding the mouse down and then while mouse is down start to press Ctrl/Cmd to start a copy operation and then\n\t\t// release the mouse button without wanting to do the navigation.\n\t\t// With this flag we prevent goto definition if the mouse was down before the trigger key was pressed.\n\t\tthis.hasTriggerKeyOnMouseDown = !!mouseEvent.event[GotoDefinitionWithMouseEditorContribution.TRIGGER_MODIFIER];\n\t}\n\n\tprivate onEditorMouseUp(mouseEvent: IEditorMouseEvent): void {\n\t\tif (this.isEnabled(mouseEvent) && this.hasTriggerKeyOnMouseDown) {\n\t\t\tthis.gotoDefinition(mouseEvent.target, mouseEvent.event.altKey).done(() => {\n\t\t\t\tthis.removeDecorations();\n\t\t\t}, (error: Error) => {\n\t\t\t\tthis.removeDecorations();\n\t\t\t\tonUnexpectedError(error);\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate onEditorKeyUp(e: IKeyboardEvent): void {\n\t\tif (e.keyCode === GotoDefinitionWithMouseEditorContribution.TRIGGER_KEY_VALUE) {\n\t\t\tthis.removeDecorations();\n\t\t\tthis.currentWordUnderMouse = null;\n\t\t}\n\t}\n\n\tprivate isEnabled(mouseEvent: IEditorMouseEvent, withKey?: IKeyboardEvent): boolean {\n\t\treturn this.hasRequiredServices &&\n\t\t\tthis.editor.getModel() &&\n\t\t\t(browser.isIE11orEarlier || mouseEvent.event.detail <= 1) && // IE does not support event.detail properly\n\t\t\tmouseEvent.target.type === editorCommon.MouseTargetType.CONTENT_TEXT &&\n\t\t\t(mouseEvent.event[GotoDefinitionWithMouseEditorContribution.TRIGGER_MODIFIER] || (withKey && withKey.keyCode === GotoDefinitionWithMouseEditorContribution.TRIGGER_KEY_VALUE)) &&\n\t\t\tDeclarationRegistry.has(this.editor.getModel());\n\t}\n\n\tprivate findDefinition(target: IMouseTarget): TPromise<IReference[]> {\n\t\tlet model = this.editor.getModel();\n\t\tif (!model) {\n\t\t\treturn TPromise.as(null);\n\t\t}\n\n\t\treturn getDeclarationsAtPosition(this.editor.getModel(), target.position);\n\t}\n\n\tprivate gotoDefinition(target: IMouseTarget, sideBySide: boolean): TPromise<any> {\n\t\tlet state = this.editor.captureState(editorCommon.CodeEditorStateFlag.Position, editorCommon.CodeEditorStateFlag.Value, editorCommon.CodeEditorStateFlag.Selection, editorCommon.CodeEditorStateFlag.Scroll);\n\n\t\treturn this.findDefinition(target).then((results: IReference[]) => {\n\t\t\tif (!results || !results.length || !state.validate(this.editor)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet position = target.position;\n\t\t\tlet word = this.editor.getModel().getWordAtPosition(position);\n\n\t\t\t// Find valid target (and not the same position as the current hovered word)\n\t\t\tlet validResults = results\n\t\t\t\t.filter(result => result.range && !(word && result.range.startColumn === word.startColumn && result.range.startLineNumber === target.position.lineNumber))\n\t\t\t\t.map((result) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tresource: result.resource,\n\t\t\t\t\t\trange: Range.collapseToStart(result.range)\n\t\t\t\t\t};\n\t\t\t\t});\n\n\t\t\tif (!validResults.length) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Muli result: Show in references UI\n\t\t\tif (validResults.length > 1) {\n\t\t\t\tlet controller = FindReferencesController.getController(this.editor);\n\t\t\t\treturn controller.processRequest(this.editor.getSelection(), TPromise.as(validResults), metaTitle);\n\t\t\t}\n\n\t\t\t// Single result: Open\n\t\t\treturn this.editorService.openEditor({\n\t\t\t\tresource: validResults[0].resource,\n\t\t\t\toptions: {\n\t\t\t\t\tselection: validResults[0].range\n\t\t\t\t}\n\t\t\t}, sideBySide);\n\t\t});\n\t}\n\n\tpublic getId(): string {\n\t\treturn GotoDefinitionWithMouseEditorContribution.ID;\n\t}\n\n\tpublic dispose(): void {\n\t\twhile (this.toUnhook.length > 0) {\n\t\t\tthis.toUnhook.pop()();\n\t\t}\n\t}\n}\n\n// register actions\nCommonEditorRegistry.registerEditorAction(new EditorActionDescriptor(PreviewDeclarationAction, PreviewDeclarationAction.ID, nls.localize('actions.previewDecl.label', \"Peek Definition\"), {\n\tcontext: ContextKey.EditorTextFocus,\n\tprimary: KeyMod.Alt | KeyCode.F12,\n\tlinux: { primary: KeyMod.CtrlCmd | KeyMod.Shift | KeyCode.F10 },\n}));\n\nlet goToDeclarationKb: number;\nif (platform.isWeb) {\n\tgoToDeclarationKb = KeyMod.CtrlCmd | KeyCode.F12;\n} else {\n\tgoToDeclarationKb = KeyCode.F12;\n}\n\nCommonEditorRegistry.registerEditorAction(new EditorActionDescriptor(GoToDeclarationAction, GoToDeclarationAction.ID, nls.localize('actions.goToDecl.label', \"Go to Definition\"), {\n\tcontext: ContextKey.EditorTextFocus,\n\tprimary: goToDeclarationKb\n}));\n\nCommonEditorRegistry.registerEditorAction(new EditorActionDescriptor(OpenDeclarationToTheSideAction, OpenDeclarationToTheSideAction.ID, nls.localize('actions.goToDeclToSide.label', \"Open Definition to the Side\"), {\n\tcontext: ContextKey.EditorTextFocus,\n\tprimary: KeyMod.chord(KeyMod.CtrlCmd | KeyCode.KEY_K, goToDeclarationKb)\n}));\n\nCommonEditorRegistry.registerEditorAction(new EditorActionDescriptor(GoToTypeDeclarationActions, GoToTypeDeclarationActions.ID, nls.localize('actions.gotoTypeDecl.label', \"Go to Type Definition\")));\nEditorBrowserRegistry.registerEditorContribution(GotoDefinitionWithMouseEditorContribution);\n"]}