{"version":3,"file":"vs/languages/less/common/parser/lessParser.js","sourceRoot":"file:///Users/darrin/src/vscode/src","sources":["vs/languages/less/common/parser/lessParser.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nimport lessScanner = require ('./lessScanner');\nimport scanner = require('vs/languages/css/common/parser/cssScanner');\nimport cssParser = require('vs/languages/css/common/parser/cssParser');\nimport nodes = require('vs/languages/css/common/parser/cssNodes');\nimport errors = require('vs/languages/css/common/parser/cssErrors');\n\n/// <summary>\n/// A parser for LESS\n/// http://lesscss.org/\n/// </summary>\nexport class LessParser extends cssParser.Parser {\n\n\tpublic constructor() {\n\t\tsuper(new lessScanner.LessScanner());\n\t}\n\n\tpublic _parseStylesheetStatement():nodes.Node {\n\t\treturn this._tryParseMixinDeclaration() || super._parseStylesheetStatement() || this._parseVariableDeclaration();\n\t}\n\n\tpublic _parseImport():nodes.Node {\n\t\tvar node = <nodes.Import> this.create(nodes.Import);\n\t\tif(!this.accept(scanner.TokenType.AtKeyword, '@import') && !this.accept(scanner.TokenType.AtKeyword, '@import-once') /* deprecated in less 1.4.1 */) {\n\t\t\treturn null;\n\t\t}\n\n\t\t// less 1.4.1: @import (css) \"lib\"\n\t\tif (this.accept(scanner.TokenType.ParenthesisL)) {\n\t\t\tif (!this.accept(scanner.TokenType.Ident)) {\n\t\t\t\treturn this.finish(node, errors.ParseError.IdentifierExpected, [ scanner.TokenType.SemiColon ] );\n\t\t\t}\n\t\t\tif (!this.accept(scanner.TokenType.ParenthesisR)) {\n\t\t\t\treturn this.finish(node, errors.ParseError.RightParenthesisExpected, [ scanner.TokenType.SemiColon ]);\n\t\t\t}\n\t\t}\n\n\t\tif(!this.accept(scanner.TokenType.URI) && !this.accept(scanner.TokenType.String)) {\n\t\t\treturn this.finish(node, errors.ParseError.URIOrStringExpected, [ scanner.TokenType.SemiColon ]);\n\t\t}\n\n\t\tnode.setMedialist(this._parseMediaList());\n\n\t\treturn this.finish(node);\n\t}\n\n\tpublic _parseMediaQuery(resyncStopToken: scanner.TokenType[]): nodes.Node {\n\t\tvar node = <nodes.MediaQuery> super._parseMediaQuery(resyncStopToken);\n\t\tif (!node) {\n\t\t\tvar node = <nodes.MediaQuery> this.create(nodes.MediaQuery);\n\t\t\tif (node.addChild(this._parseVariable())) {\n\t\t\t\treturn this.finish(node);\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t\treturn node;\n\t}\n\n\tpublic _parseVariableDeclaration(panic:scanner.TokenType[]=[]): nodes.VariableDeclaration {\n\t\tvar node = <nodes.VariableDeclaration> this.create(nodes.VariableDeclaration);\n\n\t\tvar mark= this.mark();\n\t\tif (!node.setVariable(this._parseVariable())) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (this.accept(scanner.TokenType.Colon, ':')) {\n\t\t\tnode.colonPosition = this.prevToken.offset;\n\t\t\tif (!node.setValue(this._parseExpr())) {\n\t\t\t\treturn <nodes.VariableDeclaration> this.finish(node, errors.ParseError.VariableValueExpected, [], panic);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.restoreAtMark(mark);\n\t\t\treturn null; // at keyword, but no ':', not a variable declaration but some at keyword\n\t\t}\n\t\treturn <nodes.VariableDeclaration> this.finish(node);\n\t}\n\n\tpublic _parseVariable(): nodes.Variable {\n\t\tvar node = <nodes.Variable> this.create(nodes.Variable);\n\t\tvar mark= this.mark();\n\t\twhile (this.accept(scanner.TokenType.Delim, '@')) {\n\t\t\tif (this.hasWhitespace()) {\n\t\t\t\tthis.restoreAtMark(mark);\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t\tif (!this.accept(scanner.TokenType.AtKeyword)) {\n\t\t\tthis.restoreAtMark(mark);\n\t\t\treturn null;\n\t\t}\n\t\treturn <nodes.Variable> node;\n\t}\n\n\tpublic _parseTerm(): nodes.Term {\n\t\tvar term = super._parseTerm();\n\t\tif (term) { return term; }\n\n\t\tterm = <nodes.Term> this.create(nodes.Term);\n\t\tif (term.setExpression(this._parseVariable()) ||\n\t\t\tterm.setExpression(this._parseEscaped())) {\n\n\t\t\treturn <nodes.Term> this.finish(term);\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tpublic _parseEscaped():nodes.Node {\n\t\tvar node = this.createNode(nodes.NodeType.EscapedValue);\n\t\tif(this.accept(scanner.TokenType.EscapedJavaScript) ||\n\t\t\tthis.accept(scanner.TokenType.BadEscapedJavaScript)) {\n\n\t\t\treturn this.finish(node);\n\t\t}\n\n\t\tif(this.accept(scanner.TokenType.Delim, '~')) {\n\t\t\treturn this.finish(node, this.accept(scanner.TokenType.String) ? null : errors.ParseError.TermExpected);\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tpublic _parseOperator(): nodes.Node {\n\t\tvar node = this._parseGuardOperator();\n\t\tif(node) {\n\t\t\treturn node;\n\t\t} else {\n\t\t\treturn super._parseOperator();\n\t\t}\n\t}\n\n\tpublic _parseGuardOperator(): nodes.Node {\n\t\tvar node = this.createNode(nodes.NodeType.Operator);\n\t\tif (this.accept(scanner.TokenType.Delim, '>')) {\n\t\t\tthis.accept(scanner.TokenType.Delim, '=');\n\t\t\treturn node;\n\t\t} else if (this.accept(scanner.TokenType.Delim,  '=')) {\n\t\t\tthis.accept(scanner.TokenType.Delim,  '<');\n\t\t\treturn node;\n\t\t} else if (this.accept(scanner.TokenType.Delim,  '<')) {\n\t\t\treturn node;\n\t\t}\n\t\treturn null;\n\t}\n\n\tpublic _parseRuleSetDeclaration() : nodes.Node {\n\t\tif (this.peek(scanner.TokenType.AtKeyword)) {\n\t\t\treturn this._parseKeyframe()\n\t\t\t\t|| this._parseMedia()\n\t\t\t\t|| this._parseVariableDeclaration(); // Variable declarations\n\t\t}\n\t\treturn this._tryParseMixinDeclaration()\n\t\t\t|| this._tryParseRuleset(true)  // nested ruleset\n\t\t\t|| this._parseMixinReference() // less mixin reference\n\t\t\t|| this._parseExtend() // less extend declaration\n\t\t\t|| this._parseDeclaration(); // try declaration as the last option\n\t}\n\n\tpublic _parseSimpleSelectorBody(): nodes.Node {\n\t\treturn this._parseSelectorCombinator() || super._parseSimpleSelectorBody();\n\t}\n\n\tpublic _parseSelectorCombinator():nodes.Node {\n\t\tvar node = this.createNode(nodes.NodeType.SelectorCombinator);\n\t\tif (this.accept(scanner.TokenType.Delim, '&')) {\n\t\t\twhile (!this.hasWhitespace() && (this.accept(scanner.TokenType.Delim, '-') || node.addChild(this._parseIdent()) || this.accept(scanner.TokenType.Delim, '&'))) {\n\t\t\t\t//  support &-foo\n\t\t\t}\n\t\t\treturn this.finish(node);\n\t\t}\n\t\treturn null;\n\t}\n\n\tpublic _parseSelectorIdent() : nodes.Node {\n\t\treturn this._parseIdent() || this._parseSelectorInterpolation();\n\t}\n\n\tpublic _parseSelectorInterpolation():nodes.Node {\n\t\t// Selector interpolation;  old: ~\"@{name}\", new: @{name}\n\t\tvar node = this.createNode(nodes.NodeType.SelectorInterpolation);\n\t\tif (this.accept(scanner.TokenType.Delim, '~')) {\n\t\t\tif (!this.hasWhitespace() && (this.accept(scanner.TokenType.String) || this.accept(scanner.TokenType.BadString))) {\n\t\t\t\treturn this.finish(node);\n\t\t\t}\n\t\t\treturn this.finish(node, errors.ParseError.StringLiteralExpected);\n\t\t} else if (this.accept(scanner.TokenType.Delim, '@')) {\n\t\t\tif (this.hasWhitespace() || !this.accept(scanner.TokenType.CurlyL)) {\n\t\t\t\treturn this.finish(node, errors.ParseError.LeftCurlyExpected);\n\t\t\t}\n\t\t\tif (!node.addChild(this._parseIdent())) {\n\t\t\t\treturn this.finish(node, errors.ParseError.IdentifierExpected);\n\t\t\t}\n\t\t\tif (!this.accept(scanner.TokenType.CurlyR)) {\n\t\t\t\treturn this.finish(node, errors.ParseError.RightCurlyExpected);\n\t\t\t}\n\t\t\treturn this.finish(node);\n\t\t}\n\t\treturn null;\n\t}\n\n\tpublic _tryParseMixinDeclaration():nodes.Node {\n\t\tif (!this.peek(scanner.TokenType.Delim, '.')) {\n\t\t\treturn null;\n\t\t}\n\n\t\tvar mark = this.mark();\n\t\tvar node = <nodes.MixinDeclaration> this.create(nodes.MixinDeclaration);\n\n\t\tif (!node.setIdentifier(this._parseMixinDeclarationIdentifier()) || !this.accept(scanner.TokenType.ParenthesisL)) {\n\t\t\tthis.restoreAtMark(mark);\n\t\t\treturn null;\n\t\t}\n\n\t\tif (node.getParameters().addChild(this._parseMixinParameter())) {\n\t\t\twhile (this.accept(scanner.TokenType.Comma) || this.accept(scanner.TokenType.SemiColon)) {\n\t\t\t\tif (!node.getParameters().addChild(this._parseMixinParameter())) {\n\t\t\t\t\treturn this.finish(node, errors.ParseError.IdentifierExpected);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (!this.accept(scanner.TokenType.ParenthesisR)) {\n\t\t\treturn this.finish(node, errors.ParseError.RightParenthesisExpected);\n\t\t}\n\t\tnode.setGuard(this._parseGuard());\n\n\t\tif (!this.peek(scanner.TokenType.CurlyL)) {\n\t\t\tthis.restoreAtMark(mark);\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this._parseBody(node, this._parseRuleSetDeclaration.bind(this));\n\t}\n\n\tpublic _parseMixinDeclarationIdentifier() : nodes.Identifier {\n\t\tvar identifier = <nodes.Identifier> this.create(nodes.Identifier); // identifier should contain dot\n\t\tthis.consumeToken(); // .\n\t\tif (this.hasWhitespace() || !this.accept(scanner.TokenType.Ident)) {\n\t\t\treturn null;\n\t\t}\n\t\tidentifier.referenceTypes = [ nodes.ReferenceType.Mixin ];\n\t\treturn this.finish(identifier);\n\t}\n\n\tpublic _parseExtend():nodes.Node {\n\t\tif (!this.peek(scanner.TokenType.Delim, '&')) {\n\t\t\treturn null;\n\t\t}\n\t\tvar mark = this.mark();\n\n\t\tvar node = <nodes.ExtendsReference> this.create(nodes.ExtendsReference);\n\t\tthis.consumeToken(); // &\n\t\tif (this.hasWhitespace() || !this.accept(scanner.TokenType.Colon) || !this.accept(scanner.TokenType.Ident, 'extend')) {\n\t\t\tthis.restoreAtMark(mark);\n\t\t\treturn null;\n\t\t}\n\t\tif (!this.accept(scanner.TokenType.ParenthesisL)) {\n\t\t\treturn this.finish(node, errors.ParseError.LeftParenthesisExpected);\n\t\t}\n\t\tif (!node.setSelector(this._parseSimpleSelector())) {\n\t\t\treturn this.finish(node, errors.ParseError.SelectorExpected);\n\t\t}\n\t\tif (!this.accept(scanner.TokenType.ParenthesisR)) {\n\t\t\treturn this.finish(node, errors.ParseError.RightParenthesisExpected);\n\t\t}\n\t\treturn this.finish(node);\n\t}\n\n\tpublic _parseMixinReference():nodes.Node {\n\t\tif (!this.peek(scanner.TokenType.Delim, '.')) {\n\t\t\treturn null;\n\t\t}\n\n\t\tvar node = <nodes.MixinReference> this.create(nodes.MixinReference);\n\n\t\tvar identifier = <nodes.Identifier> this.create(nodes.Identifier);\n\t\tthis.consumeToken(); // dot, part of the identifier\n\t\tif (this.hasWhitespace() || !this.accept(scanner.TokenType.Ident)) {\n\t\t\treturn this.finish(node, errors.ParseError.IdentifierExpected);\n\t\t}\n\t\tnode.setIdentifier(this.finish(identifier));\n\n\t\tif (!this.hasWhitespace() && this.accept(scanner.TokenType.ParenthesisL)) {\n\t\t\tif (node.getArguments().addChild(this._parseFunctionArgument())) {\n\t\t\t\twhile (this.accept(scanner.TokenType.Comma) || this.accept(scanner.TokenType.SemiColon)) {\n\t\t\t\t\tif (!node.getArguments().addChild(this._parseExpr())) {\n\t\t\t\t\t\treturn this.finish(node, errors.ParseError.ExpressionExpected);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!this.accept(scanner.TokenType.ParenthesisR)) {\n\t\t\t\treturn this.finish(node, errors.ParseError.RightParenthesisExpected);\n\t\t\t}\n\t\t\tidentifier.referenceTypes = [ nodes.ReferenceType.Mixin ];\n\t\t} else {\n\t\t\tidentifier.referenceTypes = [ nodes.ReferenceType.Mixin, nodes.ReferenceType.Rule ];\n\t\t}\n\n\t\tnode.addChild(this._parsePrio());\n\n\t\treturn this.finish(node);\n\t}\n\n\tpublic _parseMixinParameter():nodes.Node {\n\n\t\tvar node = <nodes.FunctionParameter> this.create(nodes.FunctionParameter);\n\n\t\t// special rest variable: @rest...\n\t\tif (this.peek(scanner.TokenType.AtKeyword, '@rest')) {\n\t\t\tvar restNode = this.create(nodes.Node);\n\t\t\tthis.consumeToken();\n\t\t\tif (!this.accept(lessScanner.Ellipsis)) {\n\t\t\t\treturn this.finish(node, errors.ParseError.DotExpected, [], [scanner.TokenType.Comma, scanner.TokenType.ParenthesisR]);\n\t\t\t}\n\t\t\tnode.setIdentifier(this.finish(restNode));\n\t\t\treturn this.finish(node);\n\t\t}\n\n\t\t// special var args: ...\n\t\tif (this.peek(lessScanner.Ellipsis)) {\n\t\t\tvar varargsNode = this.create(nodes.Node);\n\t\t\tthis.consumeToken();\n\t\t\tnode.setIdentifier(this.finish(varargsNode));\n\t\t\treturn this.finish(node);\n\t\t}\n\n\t\t// default variable declaration: @param: 12 or @name\n\t\tif (node.setIdentifier(this._parseVariable())) {\n\t\t\tthis.accept(scanner.TokenType.Colon);\n\t\t}\n\t\tnode.setDefaultValue(this._parseExpr(true));\n\n\t\treturn this.finish(node);\n\t}\n\n\tpublic _parseGuard():nodes.LessGuard {\n\n\t\tvar node = <nodes.LessGuard> this.create(nodes.LessGuard);\n\t\tif(!this.accept(scanner.TokenType.Ident, 'when')) {\n\t\t\treturn null;\n\t\t}\n\n\t\tnode.isNegated = this.accept(scanner.TokenType.Ident, 'not');\n\n\t\tif(!node.getConditions().addChild(this._parseGuardCondition())) {\n\t\t\treturn <nodes.LessGuard> this.finish(node, errors.ParseError.ConditionExpected);\n\t\t}\n\t\twhile(this.accept(scanner.TokenType.Ident, 'and') || this.accept(scanner.TokenType.Comma, ',')) {\n\t\t\tif(!node.getConditions().addChild(this._parseGuardCondition())) {\n\t\t\t\treturn <nodes.LessGuard> this.finish(node, errors.ParseError.ConditionExpected);\n\t\t\t}\n\t\t}\n\n\t\treturn <nodes.LessGuard> this.finish(node);\n\t}\n\n\tpublic _parseGuardCondition():nodes.Node {\n\t\tvar node = this.create(nodes.GuardCondition);\n\t\tif(!this.accept(scanner.TokenType.ParenthesisL)) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif(!node.addChild(this._parseExpr())) {\n\t\t\t// empty (?)\n\t\t}\n\n\t\tif(!this.accept(scanner.TokenType.ParenthesisR)) {\n\t\t\treturn this.finish(node, errors.ParseError.RightParenthesisExpected);\n\t\t}\n\n\t\treturn this.finish(node);\n\t}\n\n\tpublic _parseFunctionIdentifier(): nodes.Identifier {\n\t\tif (this.peek(scanner.TokenType.Delim, '%')) {\n\t\t\tvar node = <nodes.Identifier> this.create(nodes.Identifier);\n\t\t\tnode.referenceTypes = [ nodes.ReferenceType.Function ];\n\t\t\tthis.consumeToken();\n\t\t\treturn this.finish(node);\n\t\t}\n\n\t\treturn super._parseFunctionIdentifier();\n\t}\n}\n"]}