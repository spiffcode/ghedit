{"version":3,"sources":["vs/workbench/node/extensionPoints.ts"],"names":[],"mappings":"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","file":"vs/workbench/node/extensionPoints.js","sourceRoot":"file:///Users/darrin/src/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n'use strict';\n\nimport * as nls from 'vs/nls';\nimport * as Platform from 'vs/base/common/platform';\nimport pfs = require('vs/base/node/pfs');\nimport {IExtensionDescription, IMessage} from 'vs/platform/extensions/common/extensions';\nimport Severity from 'vs/base/common/severity';\nimport {TPromise} from 'vs/base/common/winjs.base';\nimport {groupBy, values} from 'vs/base/common/collections';\nimport paths = require('vs/base/common/paths');\nimport json = require('vs/base/common/json');\nimport Types = require('vs/base/common/types');\nimport {isValidExtensionDescription} from 'vs/platform/extensions/node/extensionValidator';\nimport * as semver from 'semver';\n\nconst MANIFEST_FILE = 'package.json';\n\nconst devMode = !!process.env['VSCODE_DEV'];\ninterface NlsConfiguration {\n\tlocale: string;\n\tpseudo: boolean;\n}\nconst nlsConfig: NlsConfiguration = {\n\tlocale: Platform.locale,\n\tpseudo: Platform.locale === 'pseudo'\n};\n\nexport class MessagesCollector {\n\n\tprivate _messages: IMessage[];\n\n\tconstructor() {\n\t\tthis._messages = [];\n\t}\n\n\tpublic getMessages(): IMessage[] {\n\t\treturn this._messages;\n\t}\n\n\tprivate _msg(source:string, type:Severity, message:string): void {\n\t\tthis._messages.push({\n\t\t\ttype: type,\n\t\t\tmessage: message,\n\t\t\tsource: source\n\t\t});\n\t}\n\n\tpublic error(source:string, message: string): void {\n\t\tthis._msg(source, Severity.Error, message);\n\t}\n\n\tpublic warn(source:string, message: string): void {\n\t\tthis._msg(source, Severity.Warning, message);\n\t}\n\n\tpublic info(source:string, message: string): void {\n\t\tthis._msg(source, Severity.Info, message);\n\t}\n}\n\nabstract class ExtensionManifestHandler {\n\n\tprotected _ourVersion: string;\n\tprotected _collector: MessagesCollector;\n\tprotected _absoluteFolderPath: string;\n\tprotected _isBuiltin: boolean;\n\tprotected _absoluteManifestPath: string;\n\n\tconstructor(ourVersion: string, collector: MessagesCollector, absoluteFolderPath:string, isBuiltin:boolean) {\n\t\tthis._ourVersion = ourVersion;\n\t\tthis._collector = collector;\n\t\tthis._absoluteFolderPath = absoluteFolderPath;\n\t\tthis._isBuiltin = isBuiltin;\n\t\tthis._absoluteManifestPath = paths.join(absoluteFolderPath, MANIFEST_FILE);\n\t}\n}\n\nclass ExtensionManifestParser extends ExtensionManifestHandler {\n\tpublic parse(): TPromise<IExtensionDescription> {\n\t\treturn pfs.readFile(this._absoluteManifestPath).then((manifestContents) => {\n\t\t\tlet errors: string[] = [];\n\t\t\tlet extensionDescription: IExtensionDescription = json.parse(manifestContents.toString(), errors);\n\t\t\tif (errors.length > 0) {\n\t\t\t\terrors.forEach((error) => {\n\t\t\t\t\tthis._collector.error(this._absoluteFolderPath, nls.localize('jsonParseFail', \"Failed to parse {0}: {1}.\", this._absoluteManifestPath, error));\n\t\t\t\t});\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn extensionDescription;\n\t\t}, (err) => {\n\t\t\tthis._collector.error(this._absoluteFolderPath, nls.localize('fileReadFail', \"Cannot read file {0}: {1}.\", this._absoluteManifestPath, err.message));\n\t\t\treturn null;\n\t\t});\n\t}\n}\n\nclass ExtensionManifestNLSReplacer extends ExtensionManifestHandler {\n\n\tpublic replaceNLS(extensionDescription:IExtensionDescription): TPromise<IExtensionDescription> {\n\t\tlet extension = paths.extname(this._absoluteManifestPath);\n\t\tlet basename = this._absoluteManifestPath.substr(0, this._absoluteManifestPath.length - extension.length);\n\n\t\treturn pfs.fileExists(basename + '.nls' + extension).then(exists => {\n\t\t\tif (!exists) {\n\t\t\t\treturn extensionDescription;\n\t\t\t}\n\t\t\treturn ExtensionManifestNLSReplacer.findMessageBundle(basename).then(messageBundle => {\n\t\t\t\tif (!messageBundle) {\n\t\t\t\t\treturn extensionDescription;\n\t\t\t\t}\n\t\t\t\treturn pfs.readFile(messageBundle).then(messageBundleContent => {\n\t\t\t\t\tlet errors: string[] = [];\n\t\t\t\t\tlet messages: { [key: string]: string; } = json.parse(messageBundleContent.toString(), errors);\n\t\t\t\t\tif (errors.length > 0) {\n\t\t\t\t\t\terrors.forEach((error) => {\n\t\t\t\t\t\t\tthis._collector.error(this._absoluteFolderPath, nls.localize('jsonParseFail', \"Failed to parse {0}: {1}.\", messageBundle, error));\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn extensionDescription;\n\t\t\t\t\t}\n\t\t\t\t\tExtensionManifestNLSReplacer._replaceNLStrings(extensionDescription, messages, this._collector, this._absoluteFolderPath);\n\t\t\t\t\treturn extensionDescription;\n\t\t\t\t}, (err) => {\n\t\t\t\t\tthis._collector.error(this._absoluteFolderPath, nls.localize('fileReadFail', \"Cannot read file {0}: {1}.\", messageBundle, err.message));\n\t\t\t\t\treturn null;\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t}\n\n\tprivate static findMessageBundle(basename: string): TPromise<string> {\n\t\treturn new TPromise<string>((c ,e, p) => {\n\t\t\tfunction loop(basename: string, locale: string): void {\n\t\t\t\tlet toCheck = `${basename}.nls.${locale}.json`;\n\t\t\t\tpfs.fileExists(toCheck).then(exists => {\n\t\t\t\t\tif (exists) {\n\t\t\t\t\t\tc(toCheck);\n\t\t\t\t\t}\n\t\t\t\t\tlet index = locale.lastIndexOf('-');\n\t\t\t\t\tif (index === -1) {\n\t\t\t\t\t\tc(`${basename}.nls.json`);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlocale = locale.substring(0, index);\n\t\t\t\t\t\tloop(basename, locale);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (devMode || nlsConfig.pseudo || !nlsConfig.locale) {\n\t\t\t\treturn c(basename + '.nls.json');\n\t\t\t}\n\t\t\tloop(basename, nlsConfig.locale);\n\t\t});\n\t}\n\n\t/**\n\t * This routine make the following assumptions:\n\t * The root element is a object literal\n\t * Strings to replace are one values of a key. So for example string[] are ignored.\n\t * This is done to speed things up.\n\t */\n\tprivate static _replaceNLStrings<T>(literal: T, messages: { [key: string]: string; }, collector: MessagesCollector, messageScope:string): void {\n\t\tObject.keys(literal).forEach(key => {\n\t\t\tif (literal.hasOwnProperty(key)) {\n\t\t\t\tlet value = literal[key];\n\t\t\t\tif (Types.isString(value)) {\n\t\t\t\t\tlet str = <string>value;\n\t\t\t\t\tlet length = str.length;\n\t\t\t\t\tif (length > 1 && str[0] === '%' && str[length - 1] === '%') {\n\t\t\t\t\t\tlet messageKey = str.substr(1, length - 2);\n\t\t\t\t\t\tlet message = messages[messageKey];\n\t\t\t\t\t\tif (message) {\n\t\t\t\t\t\t\tif (nlsConfig.pseudo) {\n\t\t\t\t\t\t\t\t// FF3B and FF3D is the Unicode zenkaku representation for [ and ]\n\t\t\t\t\t\t\t\tmessage = '\\uFF3B' + message.replace(/[aouei]/g, '$&$&') + '\\uFF3D';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tliteral[key] = message;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcollector.warn(messageScope, nls.localize('missingNLSKey', \"Couldn't find message for key {0}.\", messageKey));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else if (Types.isObject(value)) {\n\t\t\t\t\tExtensionManifestNLSReplacer._replaceNLStrings(value, messages, collector, messageScope);\n\t\t\t\t} else if (Types.isArray(value)) {\n\t\t\t\t\t(<any[]>value).forEach(element => {\n\t\t\t\t\t\tif (Types.isObject(element)) {\n\t\t\t\t\t\t\tExtensionManifestNLSReplacer._replaceNLStrings(element, messages, collector, messageScope);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}\n\nclass ExtensionManifestValidator extends ExtensionManifestHandler {\n\tvalidate(extensionDescription:IExtensionDescription): IExtensionDescription {\n\t\textensionDescription.isBuiltin = this._isBuiltin;\n\n\t\tlet notices: string[] = [];\n\t\tif (!isValidExtensionDescription(this._ourVersion, this._absoluteFolderPath, extensionDescription, notices)) {\n\t\t\tnotices.forEach((error) => {\n\t\t\t\tthis._collector.error(this._absoluteFolderPath, error);\n\t\t\t});\n\t\t\treturn null;\n\t\t}\n\n\t\t// in this case the notices are warnings\n\t\tnotices.forEach((error) => {\n\t\t\tthis._collector.warn(this._absoluteFolderPath, error);\n\t\t});\n\n\t\t// id := `publisher.name`\n\t\textensionDescription.id = `${ extensionDescription.publisher }.${ extensionDescription.name }`;\n\n\t\t// main := absolutePath(`main`)\n\t\tif (extensionDescription.main) {\n\t\t\textensionDescription.main = paths.normalize(paths.join(this._absoluteFolderPath, extensionDescription.main));\n\t\t}\n\n\t\textensionDescription.extensionFolderPath = this._absoluteFolderPath;\n\n\t\treturn extensionDescription;\n\t}\n}\n\nexport class ExtensionScanner {\n\n\t/**\n\t * Read the extension defined in `absoluteFolderPath`\n\t */\n\tpublic static scanExtension(\n\t\tversion: string,\n\t\tcollector: MessagesCollector,\n\t\tabsoluteFolderPath:string,\n\t\tisBuiltin:boolean\n\t) : TPromise<IExtensionDescription>\n\t{\n\t\tabsoluteFolderPath = paths.normalize(absoluteFolderPath);\n\n\t\tlet parser = new ExtensionManifestParser(version, collector, absoluteFolderPath, isBuiltin);\n\t\treturn parser.parse().then((extensionDescription) => {\n\t\t\tif (extensionDescription === null) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tlet nlsReplacer = new ExtensionManifestNLSReplacer(version, collector, absoluteFolderPath, isBuiltin);\n\t\t\treturn nlsReplacer.replaceNLS(extensionDescription);\n\t\t}).then((extensionDescription) => {\n\t\t\tif (extensionDescription === null) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tlet validator = new ExtensionManifestValidator(version, collector, absoluteFolderPath, isBuiltin);\n\t\t\treturn validator.validate(extensionDescription);\n\t\t});\n\t}\n\n\t/**\n\t * Scan a list of extensions defined in `absoluteFolderPath`\n\t */\n\tpublic static scanExtensions(\n\t\tversion: string,\n\t\tcollector: MessagesCollector,\n\t\tabsoluteFolderPath:string,\n\t\tisBuiltin:boolean\n\t) : TPromise<IExtensionDescription[]>\n\t{\n\t\tlet obsolete = TPromise.as({});\n\n\t\tif (!isBuiltin) {\n\t\t\tobsolete = pfs.readFile(paths.join(absoluteFolderPath, '.obsolete'), 'utf8')\n\t\t\t\t.then(raw => JSON.parse(raw))\n\t\t\t\t.then(null, err => ({}));\n\t\t}\n\n\t\treturn obsolete.then(obsolete => {\n\t\t\treturn pfs.readDirsInDir(absoluteFolderPath)\n\t\t\t\t.then(folders => TPromise.join(folders.map(f => this.scanExtension(version, collector, paths.join(absoluteFolderPath, f), isBuiltin))))\n\t\t\t\t.then(extensionDescriptions => extensionDescriptions.filter(item => item !== null))\n\t\t\t\t// TODO: align with extensionsService\n\t\t\t\t.then(extensionDescriptions => extensionDescriptions.filter(p => !obsolete[`${ p.publisher }.${ p.name }-${ p.version }`]))\n\t\t\t\t.then(extensionDescriptions => {\n\t\t\t\t\tconst extensionDescriptionsById = values(groupBy(extensionDescriptions, p => p.id));\n\t\t\t\t\treturn extensionDescriptionsById.map(p => p.sort((a, b) => semver.rcompare(a.version, b.version))[0]);\n\t\t\t\t})\n\t\t\t\t.then(null, err => {\n\t\t\t\t\tcollector.error(absoluteFolderPath, err);\n\t\t\t\t\treturn [];\n\t\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Combination of scanExtension and scanExtensions: If an extension manifest is found at root, we load just this extension,\n\t * otherwise we assume the folder contains multiple extensions.\n\t */\n\tpublic static scanOneOrMultipleExtensions(\n\t\tversion: string,\n\t\tcollector: MessagesCollector,\n\t\tabsoluteFolderPath:string,\n\t\tisBuiltin:boolean\n\t) : TPromise<IExtensionDescription[]>\n\t{\n\t\treturn pfs.fileExists(paths.join(absoluteFolderPath, MANIFEST_FILE)).then((exists) => {\n\t\t\tif (exists) {\n\t\t\t\treturn this.scanExtension(version, collector, absoluteFolderPath, isBuiltin).then((extensionDescription) => {\n\t\t\t\t\tif (extensionDescription === null) {\n\t\t\t\t\t\treturn [];\n\t\t\t\t\t}\n\t\t\t\t\treturn [extensionDescription];\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn this.scanExtensions(version, collector, absoluteFolderPath, isBuiltin);\n\t\t}, (err) => {\n\t\t\tcollector.error(absoluteFolderPath, err);\n\t\t\treturn [];\n\t\t});\n\t}\n}"]}